Suport Tècnic : CDOMICILI - ERRORS - AEAT - Error S.C.E.D:0690 CARACTERES INVALIDOS EN TAG NombreVia  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [02 - FAQ's serveis](26313393.html)
4.  [FAQ's CDOMICILI](28705548.html)
5.  [CDOMICILI - ERRORS - Recopilació d'errors i actuació](36340023.html)

Suport Tècnic : CDOMICILI - ERRORS - AEAT - Error S.C.E.D:0690 CARACTERES INVALIDOS EN TAG NombreVia
====================================================================================================

Created by Unknown User (otecobernal), last modified on 18 November 2019

L'aplicació del CDOMICILI realitza les següents accions:

*   Rep una petició de canvi de domicili per una persona a partir d'un document (DNI, NIE, PASSAPORT, etc). La petició l'envia un Ajuntament al qual la persona s'acaba de domiciliar.
*   L'aplicació processa la petició i envia una petició al PADRÓ de l'AOC de VOLANT\_TITULAR (contra el propi ajuntament i preguntant per la persona). Si el funcionament és correcte, l'aplicació del padró haurà de retornar les dades del volant de la persona amb el nou domicili.
*   Un cop es rep el volant, aquest s'envia als emissors contra els quals es vol notificar el canvi de domicili (AEAT, DGP, TGSS, etc.).
*   Els emissors contesten indicant si el canvi s'ha processat correctament o no.

Aquest error es produeix en la fase de resposta dels emissors. En aquest cas és l'AEAT qui indica que no s'ha pogut processar el volant correctament.

En aquest cas particular l'error passa perquè el camp **NombreVia** informat al volant conté caràcters que l'AEAT no és capaç de processar.

Per revisar el volant, ho podem fer a través de la base de dades del servei (podem filtrar per altres paràmetres per arribar a la comunicació en concret):

select \*
  from cd\_comunicacio\_minhap mh,
       cd\_comunicacio        c,
       cd\_titular            t,
       cd\_proces             p
 where mh.id\_comunicacio = c.id
   and c.id\_titular = t.id
   and t.id\_proces = p.id
  -- AND mh.lit\_tgss =
   --    'EL NOMBRE DE VÍA TIENE CARACTERES NO ALFABÉTICOS'
   --AND mh.lit\_aeat =
   --    'Error S.C.E.D:0690 CARACTERES INVALIDOS EN TAG NombreVia'
   AND mh.lit\_dgp =
      'NOMBRE VIA EN V.E. CON CARACTERES ESPECIALES'

  

Dins de la taula **CD\_TITULAR** hi ha una columna annomenada **VOLANT:**

**![](attachments/30867538/30867554.png)**

A la columna podrem trobar la resposta del padró (volant oficial) i per tant, el volant que s'envia a l'AEAT.

En aquests casos haurem d'analitzar quin és el caràcter especial i d'obrir un tiquet al MINHAP indicant que l'AEAT no és capaç de processar-lo, perquè ho canviïn si escau.

Podem aportar informació al tiquet indicant l'ID de la petició enviada al MINHAP, la data i el codi de l'error. Aquesta informació la trobarem a la taula **CD\_COMUNICACIO\_MINHAP.**

**Missatge Tipus**

Buenos días,

Tenemos errores en peticiones de cambio de domicilio hacia la TGSS porque no se pueden procesar ciertos caracteres en el nombre de la vía.  
Los errores ocurren cuando el nombre presenta acentos abiertos (catalán), puntos, guiones, números, paréntesis, diéresis, y otros caracteres como ç y '.

Adjuntamos ejemplos:

Ejemplo 1:

Error Literal: NOMBRE VIA EN V.E. CON CARACTERES ESPECIALES  
Código Error: 0249  
Datos Volante: HORTA STA. MARIA  
Fecha: 08/11/2019 14:04:33  
ID MINHAP: AOC70860-1573219645865

Ejemplo 2:

Error Literal: NOMBRE VIA EN V.E. CON CARACTERES ESPECIALES  
Código Error: 0249  
Datos Volante: NUM 03  
Fecha: 08/11/2019 14:04:30  
ID MINHAP: AOC70850-1573218370863

Ejemplo 3:

Error Literal: NOMBRE VIA EN V.E. CON CARACTERES ESPECIALES  
Código Error: 0249  
Datos Volante: DE L'OLI  
Fecha: 07/11/2019 14:03:41  
ID MINHAP: AOC70237-1573132710868

Ejemplo 4:

Error Literal: NOMBRE VIA EN V.E. CON CARACTERES ESPECIALES  
Código Error: 0249  
Datos Volante: CASTELL D'ALMANSA  
Fecha: 06/11/2019 14:04:42  
ID MINHAP: AOC69999-1573045826786

  
Estos caracteres no se pueden cambiar en las bases de datos de los ayuntamientos ya que son el nombre real de las calles.

¿Se podría revisar con el fin de poder procesar estos caracteres?

Muchas gracias y un saludo

Processar el nom de la via

Per tal de processar més d'un nom ho podem fer amb l'ajuda de l'excel.

Primer exportarem l'extracció a un fitxer .xls:

![](attachments/30867538/30867735.png)

  

Podrem extreure el nom de la via utilitzant la següent formula:

\=EXTRAE(Extracció!AO2; ENCONTRAR("<volante:NombreVia>"; Extracció!AO2) + 19; ENCONTRAR("</volante:NombreVia>"; Extracció!AO2; ENCONTRAR("<volante:NombreVia>"; Extracció!AO2) + 1)  - ENCONTRAR("<volante:NombreVia>"; Extracció!AO2) - 19)

on:

*   **Extracció!AO2** és la columna on es troba l'XML (el volant de padró)

*   **<volante:NombreVia>** i **</volante:NombreVia>** són els TAGS de l'XML (pot canviar el namespace volante)

*   **19** és el nombre de caràcters de del text **<volante:NombreVia>** (pot canviar el namespace volante)

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2019-11-12\_15-42-58.png](attachments/30867538/30867554.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-11-18\_16-41-48.png](attachments/30867538/30867735.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:51

[Atlassian](http://www.atlassian.com/)