Suport Tècnic : PCI2 - BACK - JBOSS - Desplegament  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.html)
4.  [Plataformes](Plataformes_41520520.html)
5.  [PCI2 - BACK - JBOSS](PCI2---BACK---JBOSS_41520840.html)

Suport Tècnic : PCI2 - BACK - JBOSS - Desplegament
==================================================

Created by Unknown User (otecobernal), last modified by David Tejada Admin on 10 June 2021

1\. Backup
----------

Els paquets a desplegar els trobarem a la ruta: **_\\\\192.168.166.33\\Desplegaments\\2019\\Pendents_**. Agafem els paquets que toca desplegar i els copiem en la ruta: **_\\\\192.168.166.33\\Desplegaments\\2019\\10 - Octubre\\24102019_**.

Tant la carpeta del mes, com la carpeta del dia poden variar. Normalment l'haurem de crear nosaltres.

Un cop copiat hem de realitzar el _backup_.

Ens dirigim a la màquines de **PCI2 - BACK**

**PRO**

*   10.120.1.105 → aoc-l-back01  
    
*   10.120.1.106 → aoc-l-back02

**PRE**

*   10.120.2.28 → aoc-l-back1-pre  
    
*   10.120.2.29 → aoc-l-back2-pre

A la ruta _/**mnt/lhnfs/aoc/webapps-backend**_ trobarem els paquets desplegats d'aquí podrem treure el backup.

![](attachments/41520842/41522330.png)

Es possible que també es demani modificar/eliminar/editar qualsevol altre fitxer de la màquina amb el desplegament. Per tant, també s'haurà de fer _backup_ dels fitxers que toqui. Normalment s'indica a la nota tècnica que adjunten al JIRA.

2\. Copiar paquet i desplegar

Una vegada fet el _backup,_ haurem de copiar el paquet a la màquina. Anirem a la ruta _/**mnt/lhnfs/aoc/webapps-backend**_ i el copiarem.

Un cop hem copiat tots el paquets, executarem el script que es troba a la ruta **_/mnt/lhnfs/aoc/scripts/desplegament\_backend.sh_**

Obrim un terminal per executar el script desplegar.sh

cd /mnt/lhnfs/aoc/scripts/
./desplegament\_backend.sh

o bé:

/mnt/lhnfs/aoc/scripts/desplegament\_backend.sh

L'script **atura** el tomcat i **elimina** els fitxers temporals **work** i **temp**, tot seguit apareix un menú amb els diferents paquets a desplegar. Hem d'escriure el número que calgui i prémer enter, d'aquesta manera haurem esborrat el que hi ha desplegat i copiat el que hem posat nosaltres.

Si s’indica un que no toca, no passaria res, ja que es desplegaria l'últim paquet pujat.

Si hi ha, revisar nota tècnica, moltes vegades cal realitzar modificacions d'altres fitxers i la màquina ha d'estar apagada.

Per últim premem el "0" per reiniciar el tomcat.

Si dóna la casualitat que tenim més d'un paquet a desplegar, podem prémer tots els números necessaris abans de prémer el 0, **sempre d'un en un**.

Una vegada hem premut el 0 s'executarà la comanda d'iniciar el tomcat i mostrarà els logs del catalina.

3\. Validacions internes.

Hi han dues maneres diferents de realitzar les validacions:

*   A nivell de fitxers → Revisar que tots els fitxers i carpetes s'han modificat correctament
*   Validació JIRA → Realitzar validació que indiquen al JIRA →  Normalment s'encarrega l'OT

  

  

**Consells:**

1.  1.  En cas de dubte i no saber a quin número pertany el paquet a desplegar:  
        Ens dirigim a la ruta: /mnt/lhnfs/aoc/scripts/ i obrim el fitxer desplegament\_backend.sh_._ Quan l'obrim podrem veure totes les passes que segueix l'script, si busquem el paquet que toca desplegar ens dirà a quin número pertany:
        
        ![](attachments/41520842/41522331.png)
        
          
        A l'exemple podem veure que el paquet _**representa.war**_ pertany al número 1.
        

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2019-5-27\_11-10-55.png](attachments/41520842/41522330.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-11-25\_12-55-53.png](attachments/41520842/41522331.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:16

[Atlassian](http://www.atlassian.com/)