Suport Tècnic : OVER - EINES SERVEI - Error Calcular el hash de les dades signades  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's OVER](28705589.md)
5.  [OLD\_OVER](OLD_OVER_41522665.md)

Suport Tècnic : OVER - EINES SERVEI - Error Calcular el hash de les dades signades
==================================================================================

Created by Unknown User (jriqueca), last modified by OTEC ST JAlejandro Cardete Postigo on 12 December 2022

Problema
--------

Quan l'usuari intenta fer un OVER\_TRAMITACIÓ obté una resposta amb l'error: "TRAMITACIÓ: No s'ha pogut calcular l'hash de les dades signades en el document PDF."

Identificació del problema
--------------------------

Aquest problema té, segurament, el seu origen o bé en el certificat o bé en l'applet que estan utilitzant per a signar, o bé en els dos alhora. Per a identificar si aquest és el problema, seguirem els següents passos:

Necessitem tenir al nostre local el PDFMetadataExtractor, podem, trobar-lo a la URL: (Sharepoint) Tecnologia - SUPORT\_TECNIC\\SOFTWARE

1.  Executem el programa i obrim el PDF.
2.  Anem a la pestanya _Utils_ i seleccionem _Browse CMS Signature._  
    _![](attachments/26313599/26316443.png)  
    _
3.  Dins ens apareixerà una finestra com la següent, on hem de seleccionar el PDF que volem analitzar:  
    _![](attachments/26313599/26316445.png)  
    _

Una vegada hem obtingut aquesta resposta observem dues coses:

*   **CmsSignedData:** Si aquest camp és **BerSequence** (tal com es veu en la imatge) significa que el PDF ha estat signat amb un applet obsolet, això pot estar trencant la signatura.
*   **Hash**: Si aquest camp és **SHA1,** significa que han utilitzat un certificat SHA-1 per a signar el PDF. Aquest és un certificat que ja està obsolet, la plataforma no els accepta.   
      
    
*   **NOTA**: És possible que si algun ens firma amb un Hash SHA-1 i un algorítme de signatura SHA-1, la tramitació passi sense donar cap error. No hauria de passar però de moment el programa ho accepta. Si aquest fos el cas, a l'hora de fer l'anàlisi amb el PDFMetaDataExtractor veuríem **SHA1** al camp Hash però no veuríem BerSequence al camp CmsSignedData.

Solució
-------

Si quan fem el test obtenim un o els dos errors explicats, cal que comuniquem a l'Usuari el que hem analitzat i els problemes que hi hem trobat, per tal que hi posin solució signant el PDF d'una manera vàlida.

  

Si ens demanen suport per a corregir aquests errors, no donem suport amb applets de signatura:

De: José Luis Pastor 
Enviado el: jueves, 13 de diciembre de 2018 9:14
Para: OTSuportTecnic <OTSuportTecnic@aoc.cat>
CC: Sergio Niñà <snina@aoc.cat>; David Tejada
<dtejada@aoc.cat>

Asunto: RE: Revisió tickets 3/12 a les 12h FP#246117 

Hola

Crec que ja es va comentar que no donavem suport amb applets
de signatura i ves a saber com genera el hash el seu applet inclús que el
configurin utilitzant un SHA-2.

Que provin

Salutacions,

FootPrint exemple
-----------------

FP # 247695

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2018-11-27\_14-8-41.png](attachments/26313599/26316445.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-11-27\_14-9-0.png](attachments/26313599/26316443.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:57

[Atlassian](http://www.atlassian.com/)