Suport Tècnic : eNOTUM - INTEGRACIÓ - Extracció massiva report diari (Excel)  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's ENOTUM](28705561.md)
5.  [eNOTUM - FLUX DEL SERVEI - Procediments i configuracions](eNOTUM---FLUX-DEL-SERVEI---Procediments-i-configuracions_36341299.md)

Suport Tècnic : eNOTUM - INTEGRACIÓ - Extracció massiva report diari (Excel)
============================================================================

Created by Unknown User (otecagonzalez), last modified on 20 August 2020

El servei d'e-NOTUM dóna un servei pels organismes, que informa el canvi d'estat de les notificacions que s'han realitzat en un dia concret. Obtenint un Excel amb aquesta informació. 

Podrem extreure l'informe si és necessari en cas d'alguna revisió. 

REF: [https://github.com/albciff/groovyScripts\_And\_SomeJava/tree/master/nt/recuperarReport](https://github.com/albciff/groovyScripts_And_SomeJava/tree/master/nt/recuperarReport)

Confluence: [eNOTUM - INTEGRACIÓ - Extracció informe diari de canvi d'estats (.xls)](26313493.md)

  

Informació

Aquest procediment no és un servei que s'ofereixi habitualment, ja que aquest procediment el poden llançar ells mateixos. 

Tot i que si algun moment puntual es produeix un error i no poden obtenir aquests informes i ens demanen la extracció podem seguir la FAQ per tal d'obtenir la informació sol·licitada. 

  

Tot i que en el procediment indicat en el punt anterior, només podríem extreure el report d'un ens, en un dia en concret o d'una sola notificació. També podríem extreure els canvis de d'estat de les notificacions en una finestra de temps determinada (Extracció massiva). 

Per obtenir aquestes dades executarem la query que fa el backend d'e-Notum modificada per obtenir el canvi d'estat d'un ens determinat i durant un rang de temps concret. 

Passos a seguir:
----------------

### 1 - Executar la següent query

D'aquesta query haurem de modificar:

*   Les dates detallades en el WHERE indicant la finestra de temps que volem extreure. Posant sempre la mateixa finestra de dies per totes les condicions. 
*   El id\_identitat, posant el id de l'entitat que volem obtenir els canvis d'estat. 

  

**QUERY**

SELECT n.\* 
FROM aoc\_nt\_notificacions n, aoc\_nt\_tramesa t
WHEREt.id\_tramesa = n.id\_tramesa
AND t.id\_entitat = 69
AND (
    n.data\_creacio			 between to\_date('01/06/2020','dd/MM/yyyy') and to\_date('31/07/2020','dd/MM/yyyy') or
    n.data\_registre		     between to\_date('01/06/2020','dd/MM/yyyy') and to\_date('31/07/2020','dd/MM/yyyy') or
    n.data\_signatura 		 between to\_date('01/06/2020','dd/MM/yyyy') and to\_date('31/07/2020','dd/MM/yyyy') or
    n.data\_visualitzacio 	 between to\_date('01/06/2020','dd/MM/yyyy') and to\_date('31/07/2020','dd/MM/yyyy') or
    n.data\_accept\_rebuig 	 between to\_date('01/06/2020','dd/MM/yyyy') and to\_date('31/07/2020','dd/MM/yyyy') or
    n.data\_error 			 between to\_date('01/06/2020','dd/MM/yyyy') and to\_date('31/07/2020','dd/MM/yyyy')
)
ORDER BY n.id\_notificacio

  

### 2 - Exportar les dades obtingudes en Excel

Un cop hem obtingut totes es dades podrem exportar-les en format Excel i donar-li format per finalitzar.  

D'aquesta manera ja tindrem els canvis d'estat d'un rang concret. 

  

Referències
-----------

[PRJ-5611](https://contacte.aoc.cat/browse/PRJ-5611?src=confmacro) - Data cannot be retrieved due to an unexpected error.  L'Ajuntament de Barcelona ens va demanar l'extracció de dos mesos, ja que al voler fer-ho manualment els hi donava error. L'origen era perquè trigava molt a fer-se la query i els hi donava Time Out. 

[SIS-3373](https://contacte.aoc.cat/browse/SIS-3373?src=confmacro) - Data cannot be retrieved due to an unexpected error.  Es va demanar a l'equip de sistemes d'implementar els índex per els camps als que fem la cerca, ja que si no aquesta query pot trigar molt. 

  

Document generated by Confluence on 02 June 2025 10:53

[Atlassian](http://www.atlassian.com/)