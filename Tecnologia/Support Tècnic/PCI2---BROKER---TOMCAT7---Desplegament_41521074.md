Suport Tècnic : PCI2 - BROKER - TOMCAT7 - Desplegament  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.md)
4.  [Plataformes](Plataformes_41520520.md)
5.  [PCI2 - BROKER - TOMCAT7](PCI2---BROKER---TOMCAT7_41521072.md)

Suport Tècnic : PCI2 - BROKER - TOMCAT7 - Desplegament
======================================================

Created by Unknown User (otecjriquelme), last modified by Unknown User (jxnieto) on 23 December 2021

Màquines Broker:

Entorn

Node 1

Node 2

PRE

10.120.2.190

10.120.2.191

PRO

10.120.1.43

10.120.1.51

Probe del Broker:

Entorn

Node 1

Node 2

PRE

[http://10.120.2.190:8080/probe](http://10.120.2.190:8080/probe)

[http://10.120.2.191:8080/probe](http://10.120.2.191:8080/probe)

PRO

[http://10.120.1.43:8080/probe](http://10.120.1.43:8080/probe)

[http://10.120.1.51:8080/probe](http://10.120.1.51:8080/probe)

Ens pot servir per veure si les aplicacions estan funcionant (columna **STATUS**),  
rebent peticions (columna **REQUEST**) després de desplegar..

Procediment per desplegar
-------------------------

1 - Realitzar Backup
--------------------

Descarreguem el WAR que hi hagi actualment pujat. Els WARS es troben a la ruta: _**/apps/versions/apache-tomcat-7.0.56/webapps**_

El guardarem a la carpeta de xarxa del desplegament, dins d'una carpeta amb el nom _backup:_

![](attachments/41521074/64979399.png)

2 - Pujar el nou WAR
--------------------

Pujem el WAR a la ruta **/mnt/lhnfs/aoc/webapps-broker** sobreescrivint l'antiga:

![](attachments/41521074/41521087.png)

  

3 - Executar l'script de càrrega
--------------------------------

Executem l'script de càrrega: **_/apps/aoc/scripts/desplegaments\_frontal\_broker.sh_**

Aquest script fa el següent:

*   Atura el Tomcat
*   Ens pregunta quin WAR volem desplegar (Ho introduim per teclat)
*   Aixeca el Tomcat quan li diem (Introduïm zero (0) per teclat)

Per tant, **li hem de indicar quina aplicació volem que desplegui.** Si no estem segurs, podem obrir el script i cercar quin número correspon al nostre war (exemple amb un desplegament de COPIA):

![](attachments/41521074/41521088.png)

**Després d'indicar-li quina aplicació volem desplegar**, introduïm un 0 per encendre el TOMCAT.

4 - **Repetir el procés** per tots els nodes
--------------------------------------------

5 - Validacions internes.
-------------------------

Hi han dues maneres diferents de realitzar les validacions:

*   A nivell de fitxers → Revisar que tots els fitxers i carpetes s'han modificat correctament
*   Validació JIRA → Realitzar validació que indiquen al JIRA →  Normalment s'encarrega l'OT

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2020-3-18\_15-57-16.png](attachments/41521074/41521086.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-3-18\_16-8-17.png](attachments/41521074/41521087.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-3-18\_16-13-44.png](attachments/41521074/41521088.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-12-23\_13-42-17.png](attachments/41521074/64979399.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:16

[Atlassian](http://www.atlassian.com/)