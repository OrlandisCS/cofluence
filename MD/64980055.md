Suport Tècnic : DESA'L - Altes/Integració  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [02 - FAQ's serveis](26313393.html)
4.  [FAQ's DESA'L](28705552.html)
5.  [DESA'L - INTEGRACIÓ SERVEI - WIP](64980105.html)

Suport Tècnic : DESA'L - Altes/Integració
=========================================

Created by David Tejada, last modified on 18 December 2023

  

Les altes del DESAL poden venir a través del ticketing intern de JIRA per serveis on les claus estaran allotjades als nostres servidors, o a través de Zendesk per les altes del nou servei de MUX3. 

En el cas que sigui d'empreses externes a l'AOC, caldrà demanar específicament un telèfon mòbil de contacte per poder enviar la secret Key per utilitzar el servei.

  

La connectivitat al POSTMAN la farem tal com tenim en la FAQ: [DESA'L - POSTMAN - WIP](64980196.html)

  

Una vegada tenim el tiquet demanant integració amb el servei DESA'l i l'integrador ens facilita el servei i el tipus de model : Complert o Bàsic, procedirem a enregistrar el nou servei en DESA'l:

Ens connectem al POSTMAN i creem el servei informant el “codiServei” i “modelMetadades”, tot seguit executem el post:

  

![](attachments/64980055/64980251.png)

  

En la resposta de l’alta  es important aquests 2 parametres (el que hem de facilitar al integrador): Les credencial no es poden tornar a recuperar…  Si les perdem haurem de rotar les credencials → [DESA'L - INTEGRACIÓ - ERROR: Pèrdua de clau secreta](64980134.html)

![](attachments/64980055/64980252.png)

En l’alta de servei, en la resposta, es dona servei en tota l'API.

![](attachments/64980055/64980253.png)

En el cas d’un servei especial, si són regles més precises, comentar amb PRJ.

  

Ara mateix tenim unes dades que ens han generat que són 3 paràmetres:

IDSERVEI

KEY

SECRET.

El que ens retorni, el guardarem al keepas que tenim en la ruta de xarxa: (Sharepoint) [https://llicenciesaoc.sharepoint.com/:f:/s/Tecnologia/Emy-ZrlCk3BQiK7NAC6LwnoBImRsubfJLrKoGV4XA8m0AA?e=A0pbP7](https://llicenciesaoc.sharepoint.com/:f:/s/Tecnologia/Emy-ZrlCk3BQiK7NAC6LwnoBImRsubfJLrKoGV4XA8m0AA?e=A0pbP7)

![](attachments/64980055/81855485.png)

  

![](attachments/64980055/64980267.png)

D'aquesta manera, tindrem el servei, la key com username i la secret com a password.

En Notes fiquem on tindrem mapejat el servei i com està codificat (ara explicarem com codificar-ho).

Com codificar les dades:

Les aplicacions nostres que utilitzin el servei de DESA'L requeriran aquests 3 paràmetres per poder operar amb el servei a AWS. Són dades diferents pels entorns de DEV, PRE i PRO.

  

Si l'alta del servei és per una entitat externa a l'AOC, en el ticket on s'està realitzant es trasllada l'accesKey generada i el secret s'envia per SMS. Aquest cas l'utilitzarem per les entitats que estan fent la integració pel MUX3.

  

En canvi, per les aplicacions internes, per tal de no disposar en clar aquesta informació a AWS encriptarem aquesta informació a través d'aquesta web: [https://www.devglan.com/online-tools/aes-encryption-decryption](https://www.devglan.com/online-tools/aes-encryption-decryption)

Deixo una altre web per si no funciona l'anterior → [https://www.javainuse.com/aesgenerator](https://www.javainuse.com/aesgenerator) (el funcionament és igual, només cal configurar el select Mode a ECB)

  

![](attachments/64980055/64980056.png)

Haurem d'encriptar tant la key com la secret. Utilitzarem el IDSERVEI com a clau. Si l'IDSERVEI és més curt de 16 caràcters ho omplirem amb 0 per la dreta fins a arribar a 16 caràcters.

  

Per exemple

  

Servei: IDCATMOBIL

Key: hiuorhdsviurf

Secret: ikjfkdjsañjifoidshf4h8hf4fo

  

![](attachments/64980055/64980057.png)![](attachments/64980055/64980058.png)

  

Aquesta informació que tenim l'haurem de ficar a la ruta **/apps/aoc/desal/credentials.properties** de la següent manera

  

IDSERVEIPARAM1=key\_encriptada

IDSERVEIPARAM2=secret\_encriptada

  

  

En l'exemple exposat

  

IDCATMOBILPARAM1=W8e3L4w/1atjLpBl7zVSrA==

IDCATMOBILPARAM2=yRgFqJ445aAKH5EKx3P7gVOSF9khlPMKiLQRWSaWf6c=

  

  

De tota aquesta informació el desenvolupador només cal que li donem el IDSERVEI i recordar-li que per desencriptar la informació per atacar a AWS haurà d'utilitzar l'IDSERVEI amb 16 caràcters completats per 0 per la dreta.

  

  

  

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2022-2-9\_11-45-52.png](attachments/64980055/64980056.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-9\_11-52-45.png](attachments/64980055/64980057.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-9\_11-53-14.png](attachments/64980055/64980058.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-16\_12-52-34.png](attachments/64980055/64980251.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-16\_12-53-35.png](attachments/64980055/64980252.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-16\_12-55-48.png](attachments/64980055/64980253.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-17\_10-26-28.png](attachments/64980055/64980266.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-2-17\_10-26-53.png](attachments/64980055/64980267.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-1-23\_13-21-28.png](attachments/64980055/81855485.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:51

[Atlassian](http://www.atlassian.com/)