Suport Tècnic : Sondes ST - MUX  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [03 - Monitorització - Revisions globals](26313327.md)
4.  [03 - Monitorització - OLD](128647245.md)
5.  [Sondes S.T.](Sondes-S.T._30869120.md)
6.  [Sondes ST - Old](Sondes-ST---Old_41522507.md)

Suport Tècnic : Sondes ST - MUX
===============================

Created by Unknown User (otecobernal), last modified by Unknown User (otecjriquelme) on 20 December 2021

  

**Sondes Funcionals**

MUX2\_Peticions\_en\_Error

  

**Query:**

 SELECT  TRUNC(KO.KO/(KO.KO+OK.OK)\*100) "% kos"
  FROM 
  (SELECT count(\*) KO
           FROM MUX2.AOC\_MUX\_AUDIT\_DADES\_GENERALS 
          where (TRACE\_DATE > (SYSDATE - INTERVAL '15' MINUTE))
            AND ESTAT = 'KO'
            AND APLICACIO != 'DUMMY') KO,
                       
        (SELECT count(\*) OK
           FROM MUX2.AOC\_MUX\_AUDIT\_DADES\_GENERALS 
          where (TRACE\_DATE > (SYSDATE - INTERVAL '15' MINUTE))
            AND ESTAT = 'OK'
            AND APLICACIO != 'DUMMY') OK

  

**Descripció:** 

SELECT \*
FROM MUX2.AOC\_MUX\_AUDIT\_DADES\_GENERALS
WHERE ESTAT = 'KO'
AND (TRACE\_DATE > (SYSDATE - INTERVAL '15' MINUTE))
AND APLICACIO != 'DUMMY'
 ORDER BY trace\_date desc;

Veurem tota la informació sobre els registres que han donat KO. Com per exemple data i hora, aplicació, procedència o destí.

  

Per agrupar els errors per aplicació:

SELECT aplicacio, COUNT(aplicacio)
FROM MUX2.AOC\_MUX\_AUDIT\_DADES\_GENERALS
WHERE ESTAT = 'KO'
AND (TRACE\_DATE > (SYSDATE - INTERVAL '15' minute))
AND APLICACIO != 'DUMMY'
  GROUP BY aplicacio;

  

**Actuació:** 

Es tracta d'una sonda bastant general. L'actuació en aquest cas es basaria a fer l'anàlisi dels errors utilitzant la QUERY presentada a sobre. Analitzant la informació de cada una de les columnes podrem detectar si els KO's se centren en un/a destí/procedència concret/a o bé en un servei o bé en un interval de temps.

Per tal de revisar més a fons un error que registri la sonda, podem copiar l'ID únic de la taula i enganxar-lo a la web Admin del MUX → Auditoria de Peticions.

D'aquesta manera, podrem revisar els XML de petició i resposta i analitzar quin tipus d'error es retorna.

Pel que fa a revisions, també pot resultar útil llençar la següent QUERY, que ens mostrarà tots els registres del MUX (OK i KO) ordenats per hora, per tal de detectar pics d'errors que s'han donat en un moment puntual. També veurem si ara mateix les peticions s'estan tractant de manera normal al MUX.

**Tots els registres**

SELECT \* FROM MUX2.AOC\_MUX\_AUDIT\_DADES\_GENERALS WHERE (TRACE\_DATE > (SYSDATE - INTERVAL '1' HOUR)) AND APLICACIO != 'DUMMY' ORDER BY TRACE\_DATE DESC

**Logs:** 

*   **Servidor:** 10.120.1.20
*   **Ruta:** /apps/aoc/IOP/logs
*   **Nom:**  MUX2\_${weblogic.Name}.log

Informació rellevant del servei

[https://www.aoc.cat/wp-content/uploads/2014/11/manualUsuariRegistreUnificat.pdf](https://www.aoc.cat/wp-content/uploads/2014/11/manualUsuariRegistreUnificat.pdf)

[P](https://www.aoc.cat/wp-content/uploads/2019/04/comunicacio-de-domicili-2-0-manual-dusuari.pdf)endent

Pendent

Document generated by Confluence on 02 June 2025 11:11

[Atlassian](http://www.atlassian.com/)