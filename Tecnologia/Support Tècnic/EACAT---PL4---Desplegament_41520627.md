Suport Tècnic : EACAT - PL4 - Desplegament  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.md)
4.  [Plataformes](Plataformes_41520520.md)
5.  [z\_OLD\_](z_OLD__118554696.md)
6.  [EACAT - PL4](EACAT---PL4_41520625.md)

Suport Tècnic : EACAT - PL4 - Desplegament
==========================================

Created by Unknown User (otecobernal), last modified by Unknown User (otecjriquelme) on 20 December 2021

**Màquines donades de baixa**

S'han aturat definitivament els Tomcat del PL4. Cap servei actiu doncs hauria de dependre d'aquestes màquines (Data: 16/12/2021)

Mantenim la documentació per precaució.

1\. Backup
----------

Els paquets a desplegar els trobarem a la ruta: **_\\\\192.168.166.33\\Desplegaments\\2019\\Pendents_**. Agafem els paquets que toca desplegar i els copiem en la ruta: **_\\\\192.168.166.33\\Desplegaments\\2019\\10 - Octubre\\24102019_**.

Tant la carpeta del mes, com la carpeta del dia poden variar. Normalment l'haurem de crear nosaltres.

Quan ja tenim localitzat el paquet a desplegar, fem el Backup:

En aquest cas el backup el farà el script automàticament. El que farem nosaltres es copiar el backup que genera el script a la carpeta de red, es troben a llocs diferents en **PRE** i **PRO.**

**PRO** → Trobarem el backup a la ruta: **_/home/liferay/desplegaments/dataAvui_**

**PRE** **→** Trobarem el backup a la ruta: **_/apps/home-tomcat/dataAvui_**

  

2\. Copiar paquet i desplegar
-----------------------------

Per realitzar el desplegament a PL4 haurem de crear una carpeta a la ruta que indiquem a sota amb la data d'avui (exemple: 20180531). Dins d'aquesta carpeta copiarem el paquet a desplegar.

La ruta canvia depenent de l'entorn.

**PRO** → Copiarem el paquet a desplegar en la ruta: **_/home/liferay/desplegaments/_**

**PRE** **→** Copiarem el paquet a desplegar en la ruta: **_/apps/home-tomcat/_**

Abans d'executar el script aturarem el tomcat:

sudo /etc/init.d/liferay stop && tail -f /apps/liferay-tomcat/logs/catalina.out

En cas que no s'hagi aturat, fer un kill \[PID\]

En el cas que provem 3 o 4 cops de fer el kill i el procés no s'aturi, farem kill -9.

  

Obrim un terminal per executar el script _desplegar.sh_.

El script també es troba en rutes diferent en funció de l'entorn on despleguem

#PRO:

/home/liferay/desplegaments/script/desplegar.sh

#PRE:

/home/tomcat/desplegar.sh  
  
  

El script ens demanarà la data d'avui (per això creem una carpeta amb la data d'avui on fiquem el paquet a desplegar). És important ficar el mateix nom que la carpeta.

![](attachments/41520627/41522296.png)

Quan pregunti el nom del portlet, indiquem el nom de la carpeta del paquet que hi ha actualment desplegat (tan sols el nom, no la ruta sencera), podem trobar-ho a la ruta: **_/apps/liferay-tomcat/webapps_**

**_![](attachments/41520627/41522297.png)_**

Premem intro i aixequem el tomcat:

sudo /etc/init.d/liferay start && tail -f /apps/liferay-tomcat/logs/catalina.out

3\. Validacions internes.
-------------------------

Hi han dues maneres diferents de realitzar les validacions:

*   A nivell de fitxers → Revisar que tots els fitxers i carpetes s'han modificat correctament
*   Validació JIRA → Realitzar validació que indiquen al JIRA →  Normalment s'encarrega l'OT

  

IMPORTANT: FER ELS NODES EN ORDRE.

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2018-5-31\_11-39-46.png](attachments/41520627/41522296.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-10-11\_12-27-14.png](attachments/41520627/41522297.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:17

[Atlassian](http://www.atlassian.com/)