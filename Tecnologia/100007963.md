Suport Tècnic : AWS - Píndoles Coneixement  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [01 - Gestió Operativa](26313391.html)

Suport Tècnic : AWS - Píndoles Coneixement
==========================================

Created by Cristian Morales, last modified on 07 March 2025

  
Cerca de logs (Cloudwatch):

Podem trobar més informació en la FAQ: [FAQ Cloudwatch](FAQ-Cloudwatch_100008809.html)  
  
  

Cerca als logs

Anem a : [https://caoc.awsapps.com/start#/](https://caoc.awsapps.com/start#/) i ens connectem a tots els serveis:

![](attachments/100007963/100007964.png)

Despleguem i anem al servei/entorn on volem revisar els logs:

![](attachments/100007963/100007965.png)

Per exemple els de enotum-PRE:

![](attachments/100007963/100007966.png)

Accedim a **Management console**

  

Cerquem CloudWatch:

![](attachments/100007963/100007967.png)

Anem a Grupos de Registros:

![](attachments/100007963/100007968.png)

Seleccionem el log i podem fer la cerca:

![](attachments/100007963/100007969.png)

  

  

Accès BASTIONHOST

Quan hàgim d'accedir al PAM per AWS. Es a dir per connectar-nos a la VM del BASTION. Hem de validar primer que no hagi algú connectat:

![](attachments/100007963/100008195.png)

Si surt action → Launch i la data i hora quadra amb el mateix dia que estem treballant, comentar amb aquest usuari si podem accedir.

activar access sempre

![](attachments/100007963/100008571.png)

  

desconnectar abans de sortir

important, desconnectar, abans de sortir de la VM:

![](attachments/100007963/100008196.png)

Tunneling per accedir a AWS - CONSTRUCCIO

  

Configuració

La informació la tenim en el SP ...\\Consorci Administració Oberta de Catalunya\\Tecnologia - General\\SUPORT\_TECNIC\\SOFTWARE\\Tunneling AWS

![](attachments/100007963/100009780.png)

Accions a realitzar:

Descarreguem i instal·lem GitBash → [https://git-scm.com/download/win](https://git-scm.com/download/win)

Instal·lem AWSCLIV2.msi → ...\\Consorci Administració Oberta de Catalunya\\Tecnologia - General\\SUPORT\_TECNIC\\SOFTWARE\\Tunneling AWS\\AWSCLIV2.msi

On tinguem instal·lat el GitBash, per exemple : C:\\Users\\USER\\AppData\\Local\\Programs\\Git\\mingw64\\bin o C:\\Program Files\\Git\\mingw64\\bin afegim el jq.exe

  

![](attachments/100007963/100009934.png)

Obrim GitBash i executem:

winpty aws configure sso --profile PS\_SUPORT\_PRE-881154467273 --region eu-west-1

![](attachments/100007963/100009936.png)

Al fer intro, surt:

![](attachments/100007963/100009937.png)

i obre una finestra de l'explorador: 

![](attachments/100007963/100009938.png)![](attachments/100007963/100009781.png)![](attachments/100007963/100009782.png)

Acceptem "Allow".

Anem a C:\\Users\\USER\\.aws\\sso\\cache i el fitxer .json generat el fiquem en el fitxer credentials.sh de la carpeta "plantilla" ![](attachments/100007963/100009942.png)  ...\\Consorci Administració Oberta de Catalunya\\Tecnologia - General\\SUPORT\_TECNIC\\SOFTWARE\\Tunneling AWS\\plantilla ![](attachments/100007963/100009939.png)

1.  Aquesta carpeta l'hem de ficar en la carpeta d'AWS que ens generem en local, en el meu cas (en cada carpeta tenim com en la plantilla): 
2.  ![](attachments/100007963/100009940.png)
3.  ![](attachments/100007963/100009941.png)
4.  Ficar al fitxer tunnel.parameterization les dades de cada entorn. ![](attachments/100007963/100009943.png)
    1.  ![](attachments/100007963/124911631.png)
    2.  ![](attachments/100007963/124911649.png)  
        1.  El instance\_id, el trobem en el EC2 (si no tenim instància s'ha de demanar a Claranet que la generin)
        2.  ![](attachments/100007963/124911633.png)
        3.  El remote Host, està en el RDS - > instancias de Base de Datos, una vegada dins, tornem a accedir i agafem el punto de enlace:
        4.  ![](attachments/100007963/124911650.png)
        5.  ![](attachments/100007963/124911651.png)
5.  Instal·lar el SessionManagerPlugin
6.  ![](attachments/100007963/100009944.png)
7.  Accedim i seguim els passos.
8.  ![](attachments/100007963/100009945.png)

Connexió

executem el git en la carpeta on tenim els paràmetres de la connexió:

![](attachments/100007963/118555284.png)

./tunnel\_rds.sh

![](attachments/100007963/124911639.png)

Ens demanarà el session name, si es el que volem, fiquem intro, si no, indiquem el nom del qual volem.

  

si no tenim session name

si no la tenim, ens demanarà la URL:

url inicial: [https://caoc.awsapps.com/start#/](https://caoc.awsapps.com/start#/)

![](attachments/100007963/124911653.png)

zona: eu-west-1

en registration scopes, donem al intro:  
![](attachments/100007963/124911654.png)

  

Ens portarà a AWS i hem de validar que es el mateix code:

![](attachments/100007963/124911640.png)

Confirmem:

![](attachments/100007963/124911641.png)

Permetem accés:

![](attachments/100007963/124911642.png)

Ara ens demanarà el compte, hem de seleccionar on volem accedir:

![](attachments/100007963/124911643.png)

Intro i ens demanarà la client region:  eu-west-1

![](attachments/100007963/124911644.png)

format: json

![](attachments/100007963/124911645.png)

I després ja tenim connexió:

![](attachments/100007963/124911646.png)

Ens connectem a la BBDD

![](attachments/100007963/124911647.png)

  

Dades

Dades que seran necessàries →

./tunnel\_rds.sh  
url inicial: [https://caoc.awsapps.com/start#/](https://caoc.awsapps.com/start#/)  
zona: eu-west-1  
format: json

  
  

Per treure usuari i contrasenya BBDD

Anem al System Manager ![](attachments/100007963/124911634.png) → Parameter Store

![](attachments/100007963/124911635.png)

cerquem el servei que volem el Password i el userName:

![](attachments/100007963/124911636.png)

![](attachments/100007963/124911637.png)

  

Sortir de la connexió

Per sortir del GitBash fem un cntrl + c

  

  

BBDD

Una vegada tinguem la connexió anterior. Obrim el DBeaver i generem nova connexió:

![](attachments/100007963/118555286.png)

![](attachments/100007963/118555287.png)

Omplim les dades: database, 

  

![](attachments/100007963/118555288.png)

  

accedir per ssh al EC2

anm a EC2 i seleccionem la instància:

![](attachments/100007963/124911657.png)

Anem a connectar:

![](attachments/100007963/124911658.png)

Seleccionem administrador de sesiones i ens connectem:

![](attachments/100007963/124911659.png)

  

Aquí anirem al SSH d'aquesta instància.

![](attachments/100007963/124911660.png)

  

  

  

Campus i Aula

[Informe Protecció de dades caràcter personal (RGPD) - Configuració Tunneling AWS](100010302.html)

Ens podem connectar al SSH i per trobar la contrasenya i l'usuari (SEMPRE ES ROOT), podem fer les comandes:

URL a connectar-nos: [http://localhost/phpmyadmin](http://localhost/phpmyadmin "http://localhost/phpmyadmin")

  

cd /home/bitnami sudo cat bitnami\_credentials

sudo cat /home/bitnami/bitnami\_credentials

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2023-10-2\_8-59-0.png](attachments/100007963/100007964.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-2\_8-59-55.png](attachments/100007963/100007965.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-2\_9-0-40.png](attachments/100007963/100007966.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-2\_9-1-34.png](attachments/100007963/100007967.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-2\_9-1-48.png](attachments/100007963/100007968.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-2\_9-2-10.png](attachments/100007963/100007969.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-24\_10-41-9.png](attachments/100007963/100008195.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-10-24\_10-42-37.png](attachments/100007963/100008196.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-12-15\_11-50-17.png](attachments/100007963/100008571.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-3-15\_11-36-57.png](attachments/100007963/100009780.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-3-15\_11-37-8.png](attachments/100007963/100009781.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-3-15\_11-38-12.png](attachments/100007963/100009782.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-3-15\_11-38-21.png](attachments/100007963/100009783.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-3-15\_11-52-0.png](attachments/100007963/100009786.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-21-14.png](attachments/100007963/100009934.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-25-5.png](attachments/100007963/100009936.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-25-22.png](attachments/100007963/100009937.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-25-49.png](attachments/100007963/100009938.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-31-49.png](attachments/100007963/100009939.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-32-46.png](attachments/100007963/100009940.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-34-27.png](attachments/100007963/100009941.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-34-45.png](attachments/100007963/100009942.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-35-10.png](attachments/100007963/100009943.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-37-29.png](attachments/100007963/100009944.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2024-4-2\_12-38-50.png](attachments/100007963/100009945.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-12\_10-59-30.png](attachments/100007963/118555284.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-12\_11-3-31.png](attachments/100007963/118555285.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-12\_11-3-43.png](attachments/100007963/118555286.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-12\_11-4-7.png](attachments/100007963/118555287.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-12\_11-4-45.png](attachments/100007963/118555288.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-25-44.png](attachments/100007963/124911630.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-27-53.png](attachments/100007963/124911631.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-28-12.png](attachments/100007963/124911632.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-29-3.png](attachments/100007963/124911633.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-31-52.png](attachments/100007963/124911634.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-32-12.png](attachments/100007963/124911635.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-33-31.png](attachments/100007963/124911636.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-33-51.png](attachments/100007963/124911637.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-35-53.png](attachments/100007963/124911639.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-37-18.png](attachments/100007963/124911640.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-37-34.png](attachments/100007963/124911641.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-37-48.png](attachments/100007963/124911642.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-39-4.png](attachments/100007963/124911643.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-40-2.png](attachments/100007963/124911644.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-40-19.png](attachments/100007963/124911645.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-41-1.png](attachments/100007963/124911646.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-44-9.png](attachments/100007963/124911647.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-50-43.png](attachments/100007963/124911649.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-51-38.png](attachments/100007963/124911650.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-52-30.png](attachments/100007963/124911651.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-55-7.png](attachments/100007963/124911653.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_11-56-33.png](attachments/100007963/124911654.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_12-57-8.png](attachments/100007963/124911657.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_12-57-26.png](attachments/100007963/124911658.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_12-57-46.png](attachments/100007963/124911659.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-2-13\_12-58-14.png](attachments/100007963/124911660.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:50

[Atlassian](http://www.atlassian.com/)