Suport Tècnic : DOGC – INTEGRACIÓ – Validar XML d'integració  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [02 - FAQ's serveis](26313393.html)
4.  [FAQ's DOGC](28705555.html)

Suport Tècnic : DOGC – INTEGRACIÓ – Validar XML d'integració
============================================================

Created by Unknown User (cmoralea), last modified by Unknown User (oteccmorales) on 21 October 2019

Validacions:
------------

OrdreInserció

El primer que hem de validar en les integracions de DOGC és que l'XML estigui correctament informat (adjunts en MTOM i tenir un ordre Inserció en b64 correctament format i amb la signatura d'un certificat Nivell4 (T-Cat), en la FAQ : [DOGC - Validar signatura ordre d'inserció](26313182.html) podem validar la signatura)

Camp "identificador" ha de ser únic

Revisant la taula select \* from MCPCIAPP.aoc\_mcdogc\_publicacio

  

El constraint UQ1\_AOC\_MCDOGC\_SOLICITUD pertany a CODI\_ORIGEN:

 ![](attachments/26313519/26317240.png)

  

I en l’XML el camp “identificador”  - SGE56553 si el cerquem com a  “CODI\_ORIGEN”, si ens retorna resultat, és perquè ja existeix un registre (no ha de sortir registres):

  

select \* from MCPCIAPP.aoc\_mcdogc\_publicacio a
where a.codi\_origen = 'SGE56553';

  

  

Si validem tot i el veiem correcte, revisem els logs

Els logs els trobem en PCI30 :

\[soa@aoc-l-soa01-pre ~\]$ cd /apps/aoc/APP/logs

El log és : MC-DOGC\_APPNODO1\_SOA.log, MC-DOGC\_APPNODO2\_SOA.log, MC-DOGC\_APPNODO3\_SOA.log

Caused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (MCPCIAPP.UQ1\_AOC\_MCDOGC\_SOLICITUD) violated

08 May 2019 17:31:06,060 WARN  DOGCMngr       : cat.aoc.pci30.core.exception.PCIException: Error realitzant el registre a EACAT: No s'ha pogut signar el document
        at cat.aoc.pci30.modalitats.dogc.DOGCMngr.publica(DOGCMngr.java:168)
        at cat.aoc.pci30.modalitats.dogc.DOGCModalitats.procesa(DOGCModalitats.java:47)
        at cat.aoc.pci30.core.mti.fases.MTIFase4Impl.procesa(MTIFase4Impl.java:30)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker.invoke(WLSInstanceResolver.java:120)
        at weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker.invoke(WLSInstanceResolver.java:93)
        at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:149)
        at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:88)
        at com.sun.xml.ws.api.pipe.Fiber.\_\_doRun(Fiber.java:1136)
        at com.sun.xml.ws.api.pipe.Fiber.\_doRun(Fiber.java:1050)
        at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:1019)
        at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:877)
        at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:419)
        at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:868)
        at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:422)
        at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:169)
        at weblogic.wsee.jaxws.WLSServletAdapter.handle(WLSServletAdapter.java:229)
        at weblogic.wsee.jaxws.HttpServletAdapter$AuthorizedInvoke.run(HttpServletAdapter.java:667)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:368)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:163)
        at weblogic.wsee.util.ServerSecurityHelper.authenticatedInvoke(ServerSecurityHelper.java:108)
        at weblogic.wsee.jaxws.HttpServletAdapter$3.run(HttpServletAdapter.java:286)
        at weblogic.wsee.jaxws.HttpServletAdapter.post(HttpServletAdapter.java:295)
        at weblogic.wsee.jaxws.JAXWSServlet.doRequest(JAXWSServlet.java:128)
        at weblogic.servlet.http.AbstractAsyncServlet.service(AbstractAsyncServlet.java:103)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:286)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:260)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:137)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:350)
        at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
        at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:141)
        at java.security.AccessController.doPrivileged(Native Method)
        at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)
        at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:650)
        at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:124)
        at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:232)
        at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:94)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
        at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:248)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3683)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3649)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:326)
        at weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:197)
        at weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)
        at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)
        at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2433)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2281)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2259)
        at weblogic.servlet.internal.ServletRequestImpl.runInternal(ServletRequestImpl.java:1691)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1651)
        at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:270)
        at weblogic.invocation.ComponentInvocationContextManager.\_runAs(ComponentInvocationContextManager.java:348)
        at weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:333)
        at weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:54)
        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)
        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:640)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:406)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:346)


Però si reviseu just després al log, es queixa del següent i està relacionat amb la mateixa petició: 

08 May 2019 17:31:07,637 ERROR DOGCModalitats : javax.persistence.RollbackException: Exception \[EclipseLink-4002\] (Eclipse Persistence Services - 2.6.4.v20160829-44060b6): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (MCPCIAPP.UQ1\_AOC\_MCDOGC\_SOLICITUD) violated

Error Code: 1
Call: INSERT INTO AOC\_MCDOGC\_PUBLICACIO (ID, CODI\_DOGC, CODI\_EACAT, CODI\_ENS, CODI\_ORIGEN, DATA\_ACTUALITZACIO, DATA\_RECEPCIO, ESTAT, ID\_PETICIO, ID\_SOLICITUD, ORDRE, REG\_ENTRADA\_DATA, REG\_ENTRADA\_NUMERO, REG\_SORTIDA\_DATA, REG\_SORTIDA\_NUM
ERO, REINTENTS) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
        bind => \[16 parameters bound\]
Query: InsertObjectQuery(cat.aoc.pci30.modalitats.dogc.entities.Publicacio@6285dc13)
        at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:159)
        at cat.aoc.pci30.modalitats.dogc.entities.DOGC.persist(DOGC.java:86)
        at cat.aoc.pci30.modalitats.dogc.DOGCMngr.publica(DOGCMngr.java:224)
        at cat.aoc.pci30.modalitats.dogc.DOGCModalitats.procesa(DOGCModalitats.java:47)
        at cat.aoc.pci30.core.mti.fases.MTIFase4Impl.procesa(MTIFase4Impl.java:30)
        at sun.reflect.NativeMethodAccessorImpl.invoke0(Native Method)
        at sun.reflect.NativeMethodAccessorImpl.invoke(NativeMethodAccessorImpl.java:62)
        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)
        at java.lang.reflect.Method.invoke(Method.java:498)
        at weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker.invoke(WLSInstanceResolver.java:120)
        at weblogic.wsee.jaxws.WLSInstanceResolver$WLSInvoker.invoke(WLSInstanceResolver.java:93)
        at com.sun.xml.ws.server.InvokerTube$2.invoke(InvokerTube.java:149)
        at com.sun.xml.ws.server.sei.SEIInvokerTube.processRequest(SEIInvokerTube.java:88)
        at com.sun.xml.ws.api.pipe.Fiber.\_\_doRun(Fiber.java:1136)
        at com.sun.xml.ws.api.pipe.Fiber.\_doRun(Fiber.java:1050)
        at com.sun.xml.ws.api.pipe.Fiber.doRun(Fiber.java:1019)
        at com.sun.xml.ws.api.pipe.Fiber.runSync(Fiber.java:877)
        at com.sun.xml.ws.server.WSEndpointImpl$2.process(WSEndpointImpl.java:419)
        at com.sun.xml.ws.transport.http.HttpAdapter$HttpToolkit.handle(HttpAdapter.java:868)
        at com.sun.xml.ws.transport.http.HttpAdapter.handle(HttpAdapter.java:422)
        at com.sun.xml.ws.transport.http.servlet.ServletAdapter.handle(ServletAdapter.java:169)
        at weblogic.wsee.jaxws.WLSServletAdapter.handle(WLSServletAdapter.java:229)
        at weblogic.wsee.jaxws.HttpServletAdapter$AuthorizedInvoke.run(HttpServletAdapter.java:667)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:368)
        at weblogic.security.service.SecurityManager.runAs(SecurityManager.java:163)
        at weblogic.wsee.util.ServerSecurityHelper.authenticatedInvoke(ServerSecurityHelper.java:108)
        at weblogic.wsee.jaxws.HttpServletAdapter$3.run(HttpServletAdapter.java:286)
        at weblogic.wsee.jaxws.HttpServletAdapter.post(HttpServletAdapter.java:295)
        at weblogic.wsee.jaxws.JAXWSServlet.doRequest(JAXWSServlet.java:128)
        at weblogic.servlet.http.AbstractAsyncServlet.service(AbstractAsyncServlet.java:103)
        at javax.servlet.http.HttpServlet.service(HttpServlet.java:790)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:286)
        at weblogic.servlet.internal.StubSecurityHelper$ServletServiceAction.run(StubSecurityHelper.java:260)
        at weblogic.servlet.internal.StubSecurityHelper.invokeServlet(StubSecurityHelper.java:137)
        at weblogic.servlet.internal.ServletStubImpl.execute(ServletStubImpl.java:350)
        at weblogic.servlet.internal.TailFilter.doFilter(TailFilter.java:25)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
        at oracle.security.jps.ee.http.JpsAbsFilter$1.run(JpsAbsFilter.java:141)
        at java.security.AccessController.doPrivileged(Native Method)
        at oracle.security.jps.util.JpsSubject.doAsPrivileged(JpsSubject.java:315)
        at oracle.security.jps.ee.util.JpsPlatformUtil.runJaasMode(JpsPlatformUtil.java:650)
        at oracle.security.jps.ee.http.JpsAbsFilter.runJaasMode(JpsAbsFilter.java:124)
        at oracle.security.jps.ee.http.JpsAbsFilter.doFilter(JpsAbsFilter.java:232)
        at oracle.security.jps.ee.http.JpsFilter.doFilter(JpsFilter.java:94)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
        at oracle.dms.servlet.DMSServletFilter.doFilter(DMSServletFilter.java:248)
        at weblogic.servlet.internal.FilterChainImpl.doFilter(FilterChainImpl.java:78)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.wrapRun(WebAppServletContext.java:3683)
        at weblogic.servlet.internal.WebAppServletContext$ServletInvocationAction.run(WebAppServletContext.java:3649)
        at weblogic.security.acl.internal.AuthenticatedSubject.doAs(AuthenticatedSubject.java:326)
        at weblogic.security.service.SecurityManager.runAsForUserCode(SecurityManager.java:197)
        at weblogic.servlet.provider.WlsSecurityProvider.runAsForUserCode(WlsSecurityProvider.java:203)
        at weblogic.servlet.provider.WlsSubjectHandle.run(WlsSubjectHandle.java:71)
        at weblogic.servlet.internal.WebAppServletContext.doSecuredExecute(WebAppServletContext.java:2433)
        at weblogic.servlet.internal.WebAppServletContext.securedExecute(WebAppServletContext.java:2281)
        at weblogic.servlet.internal.WebAppServletContext.execute(WebAppServletContext.java:2259)
        at weblogic.servlet.internal.ServletRequestImpl.runInternal(ServletRequestImpl.java:1691)
        at weblogic.servlet.internal.ServletRequestImpl.run(ServletRequestImpl.java:1651)
        at weblogic.servlet.provider.ContainerSupportProviderImpl$WlsRequestExecutor.run(ContainerSupportProviderImpl.java:270)
        at weblogic.invocation.ComponentInvocationContextManager.\_runAs(ComponentInvocationContextManager.java:348)
        at weblogic.invocation.ComponentInvocationContextManager.runAs(ComponentInvocationContextManager.java:333)
        at weblogic.work.LivePartitionUtility.doRunWorkUnderContext(LivePartitionUtility.java:54)
        at weblogic.work.PartitionUtility.runWorkUnderContext(PartitionUtility.java:41)
        at weblogic.work.SelfTuningWorkManagerImpl.runWorkUnderContext(SelfTuningWorkManagerImpl.java:640)
        at weblogic.work.ExecuteThread.execute(ExecuteThread.java:406)
        at weblogic.work.ExecuteThread.run(ExecuteThread.java:346)
Caused by: Exception \[EclipseLink-4002\] (Eclipse Persistence Services - 2.6.4.v20160829-44060b6): org.eclipse.persistence.exceptions.DatabaseException
Internal Exception: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (MCPCIAPP.UQ1\_AOC\_MCDOGC\_SOLICITUD) violated

Error Code: 1
Call: INSERT INTO AOC\_MCDOGC\_PUBLICACIO (ID, CODI\_DOGC, CODI\_EACAT, CODI\_ENS, CODI\_ORIGEN, DATA\_ACTUALITZACIO, DATA\_RECEPCIO, ESTAT, ID\_PETICIO, ID\_SOLICITUD, ORDRE, REG\_ENTRADA\_DATA, REG\_ENTRADA\_NUMERO, REG\_SORTIDA\_DATA, REG\_SORTIDA\_NUM
ERO, REINTENTS) VALUES (?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?, ?)
        bind => \[16 parameters bound\]
Query: InsertObjectQuery(cat.aoc.pci30.modalitats.dogc.entities.Publicacio@6285dc13)
        at org.eclipse.persistence.exceptions.DatabaseException.sqlException(DatabaseException.java:331)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:902)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeNoSelect(DatabaseAccessor.java:964)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.basicExecuteCall(DatabaseAccessor.java:633)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeCall(DatabaseAccessor.java:560)
        at org.eclipse.persistence.internal.sessions.AbstractSession.basicExecuteCall(AbstractSession.java:2056)
        at org.eclipse.persistence.sessions.server.ClientSession.executeCall(ClientSession.java:306)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:242)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.executeCall(DatasourceCallQueryMechanism.java:228)
        at org.eclipse.persistence.internal.queries.DatasourceCallQueryMechanism.insertObject(DatasourceCallQueryMechanism.java:377)
        at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:165)
        at org.eclipse.persistence.internal.queries.StatementQueryMechanism.insertObject(StatementQueryMechanism.java:180)
        at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.insertObjectForWrite(DatabaseQueryMechanism.java:489)
        at org.eclipse.persistence.queries.InsertObjectQuery.executeCommit(InsertObjectQuery.java:80)
        at org.eclipse.persistence.queries.InsertObjectQuery.executeCommitWithChangeSet(InsertObjectQuery.java:90)
        at org.eclipse.persistence.internal.queries.DatabaseQueryMechanism.executeWriteWithChangeSet(DatabaseQueryMechanism.java:301)
        at org.eclipse.persistence.queries.WriteObjectQuery.executeDatabaseQuery(WriteObjectQuery.java:58)
        at org.eclipse.persistence.queries.DatabaseQuery.execute(DatabaseQuery.java:904)
        at org.eclipse.persistence.queries.DatabaseQuery.executeInUnitOfWork(DatabaseQuery.java:803)
        at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWorkObjectLevelModifyQuery(ObjectLevelModifyQuery.java:108)
        at org.eclipse.persistence.queries.ObjectLevelModifyQuery.executeInUnitOfWork(ObjectLevelModifyQuery.java:85)
        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.internalExecuteQuery(UnitOfWorkImpl.java:2896)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1857)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1839)
        at org.eclipse.persistence.internal.sessions.AbstractSession.executeQuery(AbstractSession.java:1790)
        at org.eclipse.persistence.internal.sessions.CommitManager.commitNewObjectsForClassWithChangeSet(CommitManager.java:227)
        at org.eclipse.persistence.internal.sessions.CommitManager.commitAllObjectsWithChangeSet(CommitManager.java:126)
        at org.eclipse.persistence.internal.sessions.AbstractSession.writeAllObjectsWithChangeSet(AbstractSession.java:4264)
        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabase(UnitOfWorkImpl.java:1441)
        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitToDatabaseWithChangeSet(UnitOfWorkImpl.java:1531)
        at org.eclipse.persistence.internal.sessions.RepeatableWriteUnitOfWork.commitRootUnitOfWork(RepeatableWriteUnitOfWork.java:278)
        at org.eclipse.persistence.internal.sessions.UnitOfWorkImpl.commitAndResume(UnitOfWorkImpl.java:1169)
        at org.eclipse.persistence.internal.jpa.transaction.EntityTransactionImpl.commit(EntityTransactionImpl.java:134)
        ... 65 more
Caused by: java.sql.SQLIntegrityConstraintViolationException: ORA-00001: unique constraint (MCPCIAPP.UQ1\_AOC\_MCDOGC\_SOLICITUD) violated

        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:466)
        at oracle.jdbc.driver.T4CTTIoer.processError(T4CTTIoer.java:407)
        at oracle.jdbc.driver.T4C8Oall.processError(T4C8Oall.java:1113)
        at oracle.jdbc.driver.T4CTTIfun.receive(T4CTTIfun.java:546)
        at oracle.jdbc.driver.T4CTTIfun.doRPC(T4CTTIfun.java:269)
        at oracle.jdbc.driver.T4C8Oall.doOALL(T4C8Oall.java:603)
        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:234)
        at oracle.jdbc.driver.T4CPreparedStatement.doOall8(T4CPreparedStatement.java:55)
        at oracle.jdbc.driver.T4CPreparedStatement.executeForRows(T4CPreparedStatement.java:1006)
        at oracle.jdbc.driver.OracleStatement.doExecuteWithTimeout(OracleStatement.java:1316)
        at oracle.jdbc.driver.OraclePreparedStatement.executeInternal(OraclePreparedStatement.java:5010)
        at oracle.jdbc.driver.OraclePreparedStatement.executeUpdate(OraclePreparedStatement.java:5136)
        at oracle.jdbc.driver.OraclePreparedStatementWrapper.executeUpdate(OraclePreparedStatementWrapper.java:1519)
        at weblogic.jdbc.wrapper.PreparedStatement.executeUpdate(PreparedStatement.java:170)
        at org.eclipse.persistence.internal.databaseaccess.DatabaseAccessor.executeDirectNoSelect(DatabaseAccessor.java:892)
        ... 96 more     

L'error **unique constraint (MCPCIAPP.UQ1\_AOC\_MCDOGC\_SOLICITUD) violate**d

Dona un error en intentar fer un registre a EACAT, causat perquè el camp “identificador”  existeix en BBDD “CODI\_ORIGEN”:

En el detall dels logs: es queixa per aquest camp - MCPCIAPP.UQ1\_AOC\_MCDOGC\_SOLICITUD

Revisant la taula select \* from MCPCIAPP.aoc\_mcdogc\_publicacio

El constraint UQ1\_AOC\_MCDOGC\_SOLICITUD pertany a CODI\_ORIGEN:

![](attachments/26313519/26317252.png) 

I en l’XML el camp “identificador”  - SGE56553 si el cerquem com a  “CODI\_ORIGEN” ens retorna un resultat a PRE:

  

![](attachments/26313519/26317254.png)

  

  

java.lang.Exception: Error realitzant el registre a EACAT: No s'ha pogut signar el document

Si revisant els logs, ens trobem amb aquest error :

java.lang.Exception: Error realitzant el registre a EACAT: No s'ha pogut signar el document això és un problema del servei EACAT\_TR -> Comentar amb José Lluís.

  

La solució en aquests casos seria:

select \* from USU\_ENS\_ADHERITS where uea\_codi\_ens='9612050007'  
[![](https://contacte.aoc.cat/secure/thumbnail/31044/_thumb_31044.png)](https://contacte.aoc.cat/secure/attachment/31044/31044_screenshot-1.png "screenshot-1.png")

Insert en aquesta taula.  
select \* from REGE\_GENCAT.dbo.REG\_PROC\_DEST where RPD\_ID='19769'  
[![](https://contacte.aoc.cat/secure/thumbnail/31045/_thumb_31045.png)](https://contacte.aoc.cat/secure/attachment/31045/31045_screenshot-2.png "screenshot-2.png")

Insert en aquesta taula  
select \* from rege\_gencat.dbo.REG\_PROC\_DEST\_AMBIDENS where RPDA\_IDENS='9612050007'  
[![](https://contacte.aoc.cat/secure/thumbnail/31046/_thumb_31046.png)](https://contacte.aoc.cat/secure/attachment/31046/31046_screenshot-3.png "screenshot-3.png")

  

JIRA: [PRJ-3210](https://contacte.aoc.cat/browse/PRJ-3210)

  

  
Related articles

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2019-5-9\_10-45-51.png](attachments/26313519/26317240.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-5-9\_10-56-5.png](attachments/26313519/26317252.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-5-9\_10-56-34.png](attachments/26313519/26317254.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:52

[Atlassian](http://www.atlassian.com/)