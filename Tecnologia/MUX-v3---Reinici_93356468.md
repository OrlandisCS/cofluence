Suport Tècnic : MUX v3 - Reinici  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.html)
4.  [Plataformes](Plataformes_41520520.html)
5.  [MUX v3](MUX-v3_93356465.html)

Suport Tècnic : MUX v3 - Reinici
================================

Created by OTEC ST Alessandro Trombin Martinez, last modified on 19 June 2023

  

Frontals

Iniciar:

sudo systemctl start httpd.service

  

Aturar:

sudo systemctl stop httpd.service

Màquines Java

**Microservei de transaccions**

Inici:

 sudo systemctl start muxv3-transaccions.service

  

Aturada:

 sudo systemctl stop muxv3-transaccions.service

  
**Microservei de registres**  
  
Inici: 

 sudo systemctl start muxv3-registres.service

Aturada:

 sudo systemctl stop muxv3-registres.service

  

**Microservei de regles d'enrutament**

Inici:

  

 sudo systemctl start muxv3-regles.service 

Aturada:

sudo systemctl stop muxv3-regles.service 

**Microservei d'indexació**

Inici:

  

sudo systemctl start muxv3-indexer.service

  
Aturada:

 sudo systemctl stop muxv3-indexer.service

**Microservei de consola d'administració**

Inici:

  

 sudo systemctl start muxv3-admin.service

  
Aturada:

  

sudo systemctl stop muxv3-admin.service 

**Microservei de bústies**

Inici:

  

sudo systemctl start muxv3-bustia.service

  
Aturada:

  

sudo systemctl stop muxv3-bustia.service 

**Microservei de storage de les bústies (pinned al node 1)**

Inici:

  

sudo systemctl start muxv3-bustia-storage.service

Aturada:

sudo systemctl stop muxv3-bustia-storage.service

  
**Microservei de dades d'organismes**

Inici:

sudo systemctl start organismes.service

  
Aturada:

  

sudo systemctl stop organismes.service

**Microservei de generació d'id**

Inici:

  

sudo systemctl start snowflake.service

  
Aturada:

  

sudo systemctl stop snowflake.service

Hazelcast

Servidor de caché i persistència

Inici:

sudo systemctl start hazelcast.service

Aturar:

sudo systemctl stop hazelcast.service

**Ordre d'aturada/inici en cas de pas per zero**
------------------------------------------------

En cas de voler fer una aturada completa del servei, l'ordre recomanat d'aturada i inici dels components del servei és el següent:

**Aturada**

1.  Frontals Apache
2.  Servei de Transaccions
3.  Resta de serveis MUX \[Registres, Regles, Indexador, Bústia, Consola\]
4.  Servei d'organismes.
5.  Servei de generació d'IDs (snowflake)
6.  Hazelcast

**Inici**

1.  Hazelcast
2.  Servei de generació d'IDs (snowflake)
3.  Servei d'organismes.
4.  Resta de serveis MUX \[Registres, Regles, Indexador, Bústia, Consola\]
5.  Servei de Transaccions
6.  Frontals Apache

  

Important

Hazelcast és un memory-grid on les dades es desen en particions repartides entre els nodes que formen el cluster, amb una sèrie de rèpliques repartides entre els mateixos nodes de manera que el cluster pot ser tolerant a la caiguda d'algun node. Així, quan un node cau es reconstrueix el conjunt de dades original a partir d'aquestes rèpliques.

No obstant això, donat que els clusters de MUX son petits (3 nodes a PRO), la caiguda de més d'un node en un espai curt de temps provocarà la pèrdua tant de les dades com d'alguns de les seves rèpliques, fent impossible la reconstrucció d'aquestes i quedant el cluster en un estat inconsistent.

Com a conclusió, **sempre que calgui aturar Hazelcast es recomana aturar tot el servei MUX abans, i aturar TOTS els nodes del cluster de Hazelcast** per a evitar tant la pèrdua de dades com que el cluster rebi trafic mentre no té totes les dades carregades. 

  

Document generated by Confluence on 02 June 2025 11:16

[Atlassian](http://www.atlassian.com/)