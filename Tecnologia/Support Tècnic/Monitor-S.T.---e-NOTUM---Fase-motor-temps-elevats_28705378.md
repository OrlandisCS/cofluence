Suport Tècnic : Monitor S.T. - e-NOTUM - Fase motor temps elevats  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [03 - Monitorització - Revisions globals](26313327.md)
4.  [Monitors S.T.](Monitors-S.T._41522177.md)
5.  [Monitor S.T. - OLD](Monitor-S.T.---OLD_118555256.md)

Suport Tècnic : Monitor S.T. - e-NOTUM - Fase motor temps elevats
=================================================================

Created by Unknown User (otecobernal), last modified by OTEC ST Alessandro Trombin Martinez on 02 March 2022

**Query:**

SELECT count(ID\_NOTIFICACIO) REGISTRES
from NT30.aoc\_nt\_event\_motor
where estat = 1
and inici\_execucio > sysdate - interval '30' minute

**Descripció:** 

Aquesta sonda consulta les fases de la "_event motor_" que s'hagin quedat enganxades en estat d'execució en un temps superior a mitja hora de la data d'acció.

El sistema d'eNOTUM realitza una política de reintents (fins a 6) un cop falla un intent programa una data d'acció per tornar a executar la fase que toca, quan es comença a executar l'estat passa a estat 1 (executada) quan acaba sense error el registre s'esborra.

En cas d'error (estat 2) es realitza la política de reintents fins a 6 o queda un registre informant en quin estat s'ha quedat en error reintents a 6 i estat 2. Per tant si es queda en estat 1, és que s'ha quedat bloquejat el motor d'enotum i haurem d'actuar.

Fases de la event motor:

*   _FASE\_GENERACIO\_PDF\_DIPOSIT_
*   _FASE\_REGISTRE_
*   _FASE\_REPORT\_ONLINE_
*   _FASE\_GENERACIO\_PDF_
*   _FASE\_EXPIRACIO_
*   _FASE\_RECORDATORI_
*   _FASE\_DIPOSIT_

**Actuació:** 

**Quan l'estat de un event del motor d'enotum es queda enganxat en estat 1 entendrem que el motor d'enotum s'ha quedat enganxat i això ho pot provocar per diversos motius.**

1.  **Revisar plataformes**  
    Haurem de revisar com estan els nodes de NT del WL12, aquí es localitza l'aplicació d'enotum i si falla algun dels nodes és possible que estigui causant aquest error.  
      
    
2.  **Reiniciar procés de la motor.**  
    Tenint en compte que d'estat 0 a 1 ho fa els RDBMS que gestionen la event motor, haurem de revisar en quin estat es troben aquests RDBMS.  
      
    Si processen bé podem descartar que provingui del RDBMS, però el mateix sistema hauria de tornar a posar l'estat a 0 en la undo Query. Si no ho fa es probable que l'haguem de recrear.  
      
    Per provar si canviant l'estat es torna a reprocessar, farem:

update nt30.aoc\_nt\_event\_motor
set estat = 0
where id\_notificacio = 'xxxxx';

  
Un cop hem fet l'update, el RDBMS hauria de tornar a posar l'estat a 1 i el motor processar la notificació.

Per més informació podem veure els logs de la notificació:

select \*
from nt30.aoc\_nt\_logs c
--where c.nom\_fase\_motor = 'FASE\_GENERACIO\_PDF'
--and c.estat\_execucio = -1;
where c.id\_notificacio in ('xxxx');

*   **Servidor: SOA - PCI3**
*   **Ruta: /mnt/storage30/aoc/NT/logs**
*   **Nom:  NT-NTNODO1\_SOA.log**

Document generated by Confluence on 02 June 2025 11:09

[Atlassian](http://www.atlassian.com/)