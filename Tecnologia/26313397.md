Suport Tècnic : TrustedX - Servei de signatura centralitzada (SSC)  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [03 - Monitorització - Revisions globals](26313327.html)
4.  [Monitors Amposta](Monitors-Amposta_26313332.html)

Suport Tècnic : TrustedX - Servei de signatura centralitzada (SSC)
==================================================================

Created by Unknown User (obernalp), last modified by Unknown User (oteccmorales) on 15 November 2022

De moment ja tenim monitorades les següents casuístiques:

*   Quan hi ha un KO a les sondes Àurea SSC, OCP i CRL (S’executa cada 30 minuts)
*   Quan caduca algun certificat al trustedX (S’executa cada dia a les 8 del matí i s’avisa al client) Exemple al final d’aquest correu

  

Afegeixo accions pendents de l’equip del trustedX per poder realitzar les validacions i millorar la nostra documentació:

*   Accés eines trustedX: [http://10.124.5.43/monitors/tx.htm](http://10.124.5.43/monitors/tx.htm) (Estat dels nodes, operacions per minut, consultes administratives, etc..)
*   SOAPUI de les proves a realitzar.
*   Accés a la màquina ssh usuari trustedX (LINUX): 
*   FAQs: [https://suport-altresserveis.aoc.cat/hc/ca/articles/4405993249565-Documentaci%C3%B3-d-integraci%C3%B3-del-Signador-Centralitzat](https://suport-altresserveis.aoc.cat/hc/ca/articles/4405993249565-Documentaci%C3%B3-d-integraci%C3%B3-del-Signador-Centralitzat)
*   Sondes amb rellevància pel servei les de Signatura/SSC. entorns de PRO i PRE. descripció de les transaccions:
    
    [![](https://contacte.aoc.cat/secure/thumbnail/22715/_thumb_22715.png)](https://contacte.aoc.cat/secure/attachment/22715/22715_screenshot-1.png "screenshot-1.png")
    
    ID-825 Creació signatura CAdES-BES - SoapGateway => Accés amb missatgeria antiga (mètode SoapGateway) que utilitza CTTI/PICA. A traspassar a SignCert.
    
    ID-826 Creació signatura CAdES-T - SoapGateway => Prova de signatura amb segell de temps (actualment de PSIS). És rellevant per saber si funciona la TSA de PSIS. Missatgeria antiga, en aquest cas.
    
    ID-827 Creació signatura CAdES-BES - SignPwd ==> Accés amb password (mètode SignPwd). És el mètode que utilitza PCI - AOC.
    
    ID-828 Creació signatura CAdES-BES - SignCert ==> Accés amb certificat i missatgeria actual (de Rols, mètode SignCert). Utilitzat per clients externs : DIBA, etc..
    

  

Per part nostra:

*   Revisió de sondes OP5 per comprovar si surten validacions de la BBDD del trustedX.

  

Demano les dades a Sergi d’accés.

  

@Dani à Pots revisar al OP5 si tenim alguna revisió del trustedX?

TrustedX: Servei de signatura centralitzada (SSC)
=================================================

El producte trustedX és una aplicació que permet realitzar signatures en temps real a partir de claus privades cedides al consorci.

Aquesta aplicació custodia aquests certificats en una base de dades (unes 1200 entitats).

**Components tècnics:**
-----------------------

*   És una màquina tipus appliance virtual (ISO)
*   Te una shell (tipus linux) dissenyada des d'un punt de vista d’aplicació
*   Te una capa d’aplicació per sobre sistema
*   Conexio oracle 12 i els "HSM"
    *   Hi ha 2 HSM. Aquests components només afecten el trustedX
    *   Està capat, no hi ha root à sistema tancat
    *   2 frontals que dirigeixen peticions HTTPS
        *   port 8009 rep entrades --> monitorar que estigui aixecat
        *   En el cas que hi hagi HSM (més segur) la signatura només es pot fer al HSM

  

**Eines de monitoratge:**
-------------------------

*   Soap UI: ataca a un port de servei
    *   L'última sonda (últim test) és la important que fan servir els clients                   
    *   Consola web administració: 10.120.1.125:8080 a demanar accés i usuari
        *   Hi ha rol específic que permeten fer diferents coses
        *   Et permet veure l'últim reinici
        *   Et permet veure l’última petició (hora)
        *   Et permet reiniciar les estadístiques per veure com funciona
        *   Et permet veure els logs de 15 minuts
        *   És complicat buscar una petició en concret
        *   Es pot filtrar per info, warning, error, etc

*   Sonda oficial SSC:
    *   S'identifiquen les aplicacions que s'integren amb trustedX
    *   La 2a sonda es connecta aPSIS
    *   Si hi ha un error, no surt temps, surt l'error
    *   Les integracions de clients es fan amb SignCert, l’última sonda

*   Shell tipo linux per SSH:
    *   Només hi ha 2 users:
        *   L'admin
        *   trustedX: Linux à Es poden fer comandes tipo grep
*   Es pot veure CPU, %, memòria i una primera visió de com està la màquina
*   Temps mitjà de processament de petició de 2-3 segons (amb connexió interna a PSIS)
*   Si es veu un pic en CPU en temps real, és que ha arribat una petició
*   Es fan unes 2 signatures per segon
*   Si veiem que fa SWAP és que alguna cosa no va bé, hi ha timeouts
*   Podem realitzar les següents comandes:
    *   net connections per veure ports oberts
    *   service info et diu si està arrencat o no
    *   system info et diu l'espai al disc
    *   hsm .... et diu la ip de cada mòdul: Si veiem molts errors globals, aquesta comanda fallaria perquè els HSM no estan aixecats o no troba la clau
    *   net ping al hsm per saber si arribem
*   Haurem de tenir en compte:
    *   el jboss a vegades escriu molt
    *   un service restart tarda 2 o 3 minuts tranquil·lament

  

Document generated by Confluence on 02 June 2025 11:09

[Atlassian](http://www.atlassian.com/)