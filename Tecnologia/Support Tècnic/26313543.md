Suport Tècnic : OVER - INTEGRACIÓ - Integració amb el servei OVER  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's OVER](28705589.md)
5.  [OLD\_OVER](OLD_OVER_41522665.md)

Suport Tècnic : OVER - INTEGRACIÓ - Integració amb el servei OVER
=================================================================

Created by Unknown User (agonlara), last modified by OTEC ST JAlejandro Cardete Postigo on 12 December 2022

EN REVISIÓ
----------

Pas 0: Requeriments
-------------------

*   Sol·licitud d’integració: El document d’integració que rebem per part de l’usuari ha d’estar signat digitalment, ha de tenir el servei d’OVER seleccionat per la integració i les IP’s corresponents per donar l’accés (en cas que es sol·liciti la modalitat de OVER\_DOCUMENTACIO).

*   Certificació Digital CDA: Certificat CDA vàlid propi de l’entitat en format .cer/.crt

**_En cas que algun d’aquests casos no es compleixin hem de posar-nos amb contacte amb l’entitat, per indicar que per procedir necessitem el que falta_** **_(Missatges tipus)_****_._**

  

Pas 1:  Preguntar a l'usuari per a què vol utilitzar OVER.
----------------------------------------------------------

OVER és un servei que s'utilitza per tramitar PDF. Prèviament, però, cal obtenir el PDF que es vol tramitar. Per obtenir el PDF a tramitar existeixen dues modalitats:

1.  **OVER\_FORMULARI**: L'AOC proporciona el PDF a l'usuari per tal que ell només hagi d'omplir-lo amb les dades.
2.  **OVER\_CONTEXT**: L'usuari genera el PDF ell mateix i posteriorment l'omple amb les dades.

Utilitzar OVER\_CONTEXT és molt problemàtic, ja que molts usuaris generen el PDF malament i a l'hora de tramitar-lo (amb la modalitat OVER\_TRAMITACIO) obtenen errors. Per aquesta raó des de l'AOC s'indica a l'usuari que si vol integrar-se a OVER per a realitzar trameses genèriques TGEN, ha d'integrar-se amb la modalitat OVER\_FORMULARI, **mai amb la OVER\_CONTEXT**. La modalitat OVER\_CONTEXT serà útil si es volen fer trameses pròpies, no TGEN.

INFO: OVER\_FORMULARI no s'utilitza únicament per la TGEN.

  

Missatge Tipus: Inici d'alta

Benvolguts,

  

Hem rebut correctament la vostra sol·licitud d'alta. No obstant això, a causa de la complexitat que comporta la integració amb el servei d'EACAT Tràmits (OVER), volem preguntar-vos quina és la necessitat que voleu cobrir amb la vostra integració al servei d'OVER; és a dir, amb quin tipus de tràmit voleu integrar-vos? Teniu pensat utilitzar Trameses Genèriques (TGEN) o bé integrar-vos amb tràmits propis?

El Consorci AOC, amb l'objectiu de facilitar el desenvolupament de les integracions, posa a la vostra disposició els següents clients d'exemple de la PCI:

*   [https://suport-integradors.aoc.cat/hc/ca/articles/7352984409757-Documentaci%C3%B3-gen%C3%A8rica-per-a-integrar-se-a-la-PCI](https://suport-integradors.aoc.cat/hc/ca/articles/7352984409757-Documentaci%C3%B3-gen%C3%A8rica-per-a-integrar-se-a-la-PCI)
    

La documentació d’integració específica del servei sol·licitat, la teniu disponible al document d'integració que es troba a la web de suport: [https://suport-eacat.aoc.cat/hc/ca/articles/4414391252113-Com-es-pot-obtenir-la-documentaci%C3%B3-t%C3%A8cnica-per-integrar-se-amb-EACAT-](https://suport-eacat.aoc.cat/hc/ca/articles/4414391252113-Com-es-pot-obtenir-la-documentaci%C3%B3-t%C3%A8cnica-per-integrar-se-amb-EACAT-) on també podeu trobar els esquemes d'integració.

Esperem la vostra resposta abans de seguir endavant amb la integració.

Restem a la vostra disposició per atendre qualsevol dubte o problema.

Moltes gràcies,

  

Salutacions,

Quan rebi aquest correu, l'ens ens hauria de respondre quin camí de flux vol seguir: Integrar-se amb Trameses Genèriques o bé fer-ho amb tràmits propis.

Si l'ens ens respon que vol integrar-se amb tot, hauríem de comentar-ho internament. Potser hauríem de fer una reunió informativa amb ells. El més normal és agafin l'opció de Tramesa genèrica, ja que la majoria d'ens utilitzaran Trameses Genèriques. 

Pas 2:  Crear carpeta amb el nom del FP i posar-hi els documents que adjunten.
------------------------------------------------------------------------------

(Sharepoint) Tecnologia - SUPORT\_TECNIC\\SERVEIS\\OVER\\01 Integració\\04 Altes de Serveis\\nºPeticio\_NomAjuntament (nom directori).

![](attachments/26313543/26314010.png?effects=drop-shadow)

Pas 3:  Autorització i Autenticació al SIRI
-------------------------------------------

Per donar l’alta tant a PRE com a PRO hem de realitzar aquests passos. Un cop per entorn.

**Autorització SIRI**
---------------------

![](attachments/26313543/26314362.png?effects=drop-shadow)

*   *   *   Accedir a EACAT de PRE  ([https://plpre6.eacat.cat/](https://plpre6.eacat.cat/)) hem d’anar a l’apartat de **Via Oberta → SIRI → Autoritzacions → Nova Autorització**

  

1

**PRE- PRODUCCIÓ**

  

2

Requeridor

Nom del ens (quan surt desplegable fer click al ens)

3

Tipus de producte

  

Desconegut

4

Producte

Over

  

5

Modalitat

  

  

![](attachments/26313543/41522641.png)  

  

6

Finalitat

  

Proves

  

  

*   *   Accedir a EACAT de PRO ([https://idp.eacat.net/Logon.aspx?providerID=EACATPL6&impersonable=1](https://idp.eacat.net/Logon.aspx?providerID=EACATPL6&impersonable=1)) hem d’anar a l’apartat de **Via Oberta → SIRI → Autoritzacions → Nova Autorització**

  

**PRODUCCIÓ**

**NO DONAREM D'ALTA A PRO** FINS QUE NO VALIDEM LES PROVES A PRE.

Requeridor

  

Nom del ens (quan surt desplegable fer click al ens)

  

Tipus de producte

  

Aplicació

  

Producte

Over - EACAT Tràmits

  

Modalitat

  

  

![](attachments/26313543/41522640.png)  

  

Finalitat\*

  

Tramitació interadministrativa (TRAMITACIÓ)

  

                **Autenticació SIRI**
-------------------------------------

![](attachments/26313543/26314367.png)

  

*   *   *   *   Des del mateix portal per a l’entorn de PRE ens dirigim a:  **Via Oberta → SIRI → Autenticació → Nova Autorització**

PRE-Producció

  

Tipus d’autenticació

Certificat digital

Valor

  

Organisme i descripció

Nom del ens (quan surt desplegable fer clic al ens)

Descripció

Nom del ens – ANY - FP#numeroFootprints

Adjuntar CDA

CDA : (Segell Electrònic CDANM-1 (Nivell Mig))

  

*   *   *   *   Des del mateix portal per a l’entorn de PRO ens dirigim a:  **Via Oberta → SIRI → Autenticació → Nova Autorització**

Producció

**NO DONAREM D'ALTA A PRO** FINS QUE NO VALIDEM LES PROVES A PRE.

Tipus d’autenticació

Certificat digital

Valor

  

Organisme i descripció

Nom del ens (quan surt desplegable fer clic al ens)

Descripció

Nom del ens – ANY- FP#numeroFootprints

Adjuntar CDA

CDA : (Segell Electrònic CDANM-1 (Nivell Mig))

  

Pas 2:  Configuració de les IP's
--------------------------------

*   *   *   Les IP's **no** s'han de configurar. 
        *   **Només** es configura en cas que donem d'alta la modalitat **OVER\_DOCUMENTACIO** al bloc d'APP:   
            ![](attachments/26313543/26314241.png)  
            També podem veure-ho a la FAQ: [Global - Configuració d'IP's](26313331.md).

Pas 3:  Comprovació del registre d'alta a l'entitat
---------------------------------------------------

PL/SQL → BBDD(ORAPRE) → Fem la consulta següent: 

SELECT \--o.nom,  
       \--o.codi,  
       p.NOM       as NOM\_PRODUCTE,  
       p.CODI      as CODI\_PRODUCTE,  
       m.NOM       as NOM\_MODALITAT,  
       m.CODI      as CODI\_MODALITAT,  
       f.NOM       as NOM\_FINALITAT,  
       f.CODI      as CODI\_FINALITAT  
      \-- a.data\_alta  
  FROM SIRI.AOC\_PCI\_SIRI\_AUTORITZACIO a,  
       SIRI.AOC\_PCI\_SIRI\_ORGANISME    o,  
       SIRI.AOC\_PCI\_SIRI\_PRODUCTE     p,  
       SIRI.AOC\_PCI\_SIRI\_MODALITAT    m,  
       SIRI.AOC\_PCI\_SIRI\_FINALITAT    f  
 WHERE a.ID\_ORGANISME = o.ID  
   AND a.ID\_MODALITAT = m.ID  
   AND a.ID\_FINALITAT = f.ID  
   AND m.ID\_PRODUCTE = p.ID  
       AND o.codi = '830080001'-- <---Codi ens  
      and p.codi like '%OVER%' – <--- Ha de ser del servei Over  
 order by a.data\_alta desc

*   *   *   El resultat ens servirà per a crear la plantilla del missatge tipus de fi d'alta.
        *   Si apareix vol dir que s'ha realitzat correctament l'alta a l'entorn de PRE. Ja podrem notificar a l'entitat que l'hem donat d'alta amb el missatge tipus (**[fi d'alta](#OVERINTEGRACIÓIntegracióambelserveiOVER-fi)**).

Pas 4: Integració per tots els tràmits d’un servei
--------------------------------------------------

  

S'ha fet un nou evolutiu en l'apartat d'integració de descàrrega formularis via OVER\_FORMULARI.

Per defecte, els formularis que es generen en executar l'acció OVER\_FORMULARI es retornarà a la resposta la ruta on es troben.

Si necessitem habilitar la integració a algú, hem de configurar el seu ens i el codi funcional del servei o tràmit al qual l'usuari es vol integrar per tal que el motor retorni el formulari en BASE64 i no la ruta.

S'ha generat a la BBDD d'OVER una nova taula per realitzar aquestes configuracions, aquesta taula s'anomena **OVER\_FORMULARI\_BYTES,** en aquests moments s'ha de fer la configuració a mà, no obstant en un futur s'haurà d'utilitzar l'administrador d'over per configurar-ho.

  

NOMES ES FA L'INSERT EN EL CAS DE PRE

En producció s'ha configurat que tots els ens que es descarreguen la TGEN puguin integrar-se directament perquè els formularis a producció tenen una mida reduïda.

  

Ara mateix s'està modificant els formularis de la TGEN a preproducció, això farà que el formulari augmenti la seva mida considerablement, la idea és que utilitzem PRE per localitzar aquests ens que s'integren amb aquest servei i activar la integració únicament a ells i així disminuirem la quantitat de tgen que es descarreguen diàriament amb el formulari en base64 a la resposta quan no és necessari.

  

En preprodució, quan un ens tingui aquest problema si us plau utilitzeu l'opció CF\_SERVEI + Ens (en cas de la tgen) així quan tinguem el nou formulari de la tgen enllestit, podrem pujar tant el formulari com la configuració d'aquests ens a producció i deshabilitar la integració total amb la TGEN.

FP#342767

   select \* from over\_formulari\_bytes a
   where a.codi\_funcional\_servei = 'TGEN0001';-- 829750006, 8200330008
   
	--Haurem de hardcodejar la casella de ID, per tal de saber quin número de ID hem d'afegir, utilitzarem el query anterior
	--(select \* from over\_formulari\_bytes a
	--where a.codi\_funcional\_servei = 'TGEN0001';)
	--Llavors fas ALT+END (o la flecha verda cap a baix per veure el número total d'ens en la base dades),
	--desprès ho ordenes per ID i simplement sumés un 1 a la ID més alta que trobis

   insert into over\_formulari\_bytes (ID, CODI\_FUNCIONAL\_SERVEI, CODI\_FUNCIONAL\_TRAMIT, CODI\_ENS)
values (25, 'TGEN0001', null, '8200330008');

insert into over\_formulari\_bytes (ID, CODI\_FUNCIONAL\_SERVEI, CODI\_FUNCIONAL\_TRAMIT, CODI\_ENS)
values (26, 'AMB0002', null, '8200330008');

   
select \* from over2.over\_pica\_cataleg  a
where a.pica\_codi\_tramit = 'ANC001';

  

4.1 Integració per tots els ens (únicament per serveis específics)

Aquesta integració abans de configurar-la s'hi ha d'avaluar si realment és necessari o es pot aprofita l'opció 4.2, ja que afegir aquesta configuració comportarà que tots els formularis dins del CODI\_FUNCIONAL\_SERVEI configurat es descarregaran sempre en format BASE64.

![](attachments/26313543/41517063.png)

![](attachments/26313543/40763440.png)  

Com es mostra a la imatge, per fer aquesta configuració, únicament afegim el Codi Funcional del servei i tots els ens que es descarreguin algun formulari assignat als tràmits d’aquest servei retornaran els formularis en format BASE64.

4.2 Integració per un ens concret

Per tal d’indicar al motor que volem que tots els formularis assignats als tràmits d’un mateix servei s’informin en format BASE64 per un ens en concret hem de configurar-lo de la manera següent:

![](attachments/26313543/40763441.png)

Altres ens que no siguin els informats en els registres de la imatge, la resposta de OVER\_FORMULARI encarà, es veurà en ruta i no en BASE64.

4.3 Integració per un tràmit en concret

Aquesta configuració la realitzarem únicament en el cas que l’integrador vulgui descarregar un únic formulari d’un tràmit en qüestió.

4.3.1 Integració per tots els ens (únicament per serveis específics)

Aquesta integració abans de configurar-la s'hi ha d'avaluar si realment és necessari o es pot aprofita l'opció 3.2, ja que afegir aquesta configuració comportarà que tots els formularis dins del CODI\_FUNCIONAL\_TRAMIT configurat es descarregaran sempre en format BASE64.

![](attachments/26313543/40763442.png)

Com es mostra a la imatge, per fer aquesta configuració, únicament afegim el Codi Funcional del tràmit i tots els ens que es descarreguin el formulari assignat al tràmit es retornarà en format BASE64.

4.3.2 Integració per un ens en concret

Per tal d’indicar al motor que volem que el formulari d’un tràmit s’informi en format BASE64 per un ens en concret hem de configurar-lo de la manera següent:

![](attachments/26313543/40763443.png)

Altres ens que no siguin els informats en els registres de la imatge, la resposta de OVER\_FORMULARI encarà, es veurà en ruta i no en BASE64.

  

**Un cop realitzada l’alta generarem un missatge de fi d’alta on els adjuntarem una taula on es presenti les modalitats i/o finalitats que se’ls hi ha donat d’alta.** 

  

Pas 5: Missatges tipus
----------------------

  

Demanar CDA

Benvolguts, Hem rebut la vostra sol·licitud d’alta. Per tal de realitzar les proves webService a l’entorn de preproducció, necessitaríem per part vostre el certificat CDA (la clau pública .cer) amb el qual signareu les peticions XML via webService. Si ens la podeu adjuntar, us ho agrairíem. Quedem a la vostra disposició per atendre qualsevol dubte o problema. Salutacions

  

  

  

Demanar informació integració

Benvolguts,

Per tal de procedir amb la integració necessitem en primer lloc disposar d'un formulari d'integració signat per l'ens que es vulgui integrar, en aquest cas L'Ajuntament de XXXXX. Per proporcionar-vos els permisos d’accés necessaris, també necessitem el certificat d’aplicació (CDA) amb el qual signareu les peticions XML cap a les nostres plataformes. En el següent link podeu descarregar el formulari d’integració on podeu informar aquestes IPs junt amb les altres dades necessàries, i ens el feu arribar signat digitalment: [https://suport-integradors.aoc.cat/hc/ca/articles/4416407051665-Quines-dades-necessita-el-Consorci-AOC-per-integrar-me-amb-el-servei-](https://suport-integradors.aoc.cat/hc/ca/articles/4416407051665-Quines-dades-necessita-el-Consorci-AOC-per-integrar-me-amb-el-servei-)

En cas que us integreu via webservice per primera vegada amb els serveis del Consorci AOC, necessitareu la documentació d’integració de la Plataforma de Col·laboració Interadministrativa (PCI). Per poder consumir els serveis del Consorci AOC, cal fer-ho a través de la PCI. La PCI és un conjunt de sistemes i components orientats a la total disponibilitat dels serveis amb garanties de màxima seguretat en el servei i en l'accés a les dades. La documentació següent conté les especificacions de la missatgeria de la PCI. El Consorci AOC, amb l'objectiu de facilitar el desenvolupament de les integracions, posa a la vostra disposició els següents clients d'exemple de la PCI: [https://suport-integradors.aoc.cat/hc/ca/articles/7352984409757-Documentaci%C3%B3-gen%C3%A8rica-per-a-integrar-se-a-la-PCI](https://suport-integradors.aoc.cat/hc/ca/articles/7352984409757-Documentaci%C3%B3-gen%C3%A8rica-per-a-integrar-se-a-la-PCI) i també trobareu la documentació per integrar-vos via MTOM, ja que els documents només es poden enviar per aquesta via.

La documentació d’integració específica del servei sol·licitat, la teniu disponible a:

**Documentació integració i Esquemes >> [https://suport-eacat.aoc.cat/hc/ca/articles/4414391252113-Com-es-pot-obtenir-la-documentaci%C3%B3-t%C3%A8cnica-per-integrar-se-amb-EACAT-](https://suport-eacat.aoc.cat/hc/ca/articles/4414391252113-Com-es-pot-obtenir-la-documentaci%C3%B3-t%C3%A8cnica-per-integrar-se-amb-EACAT-)**

Si necessiteu informació addicional, us podem realitzar una conversa telefònica per tractar els vostres dubtes. Quedem a la vostra disposició per atendre qualsevol dubte o problema.

Salutacions.

  

  

Fi d'alta PRE-PRO NOMÉS ÉS UN EXEMPLE

Bon dia, 

Us hem donat d'alta a l'entorn de pre-producció i producció per les següents modalitats i finalitats d'OVER:

  

![](attachments/26313543/26314238.png)

  

![](attachments/26313543/26314237.png)  

  

En aquesta FAQ ([https://suport-eacat.aoc.cat/hc/ca/articles/4414391252113-Com-es-pot-obtenir-la-documentaci%C3%B3-t%C3%A8cnica-per-integrar-se-amb-EACAT-](https://suport-eacat.aoc.cat/hc/ca/articles/4414391252113-Com-es-pot-obtenir-la-documentaci%C3%B3-t%C3%A8cnica-per-integrar-se-amb-EACAT-)) teniu la documentació específica per integrar-vos al servei d'OVER.

Restem a la vostra disposició,

Salutacions

  

  

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2018-8-2\_16-14-33.png](attachments/26313543/26314010.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-8-2\_16-26-39.png](attachments/26313543/26314371.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-3-20\_15-56-26.png](attachments/26313543/26314367.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-8-2\_16-50-3.png](attachments/26313543/26314362.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-9-20\_12-17-44.png](attachments/26313543/26314241.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-9-20\_12-25-14.png](attachments/26313543/26314238.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-9-20\_12-26-49.png](attachments/26313543/26314237.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-6-2\_8-57-44.png](attachments/26313543/40763440.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-6-2\_9-2-10.png](attachments/26313543/40763441.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-6-2\_9-8-9.png](attachments/26313543/40763442.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-6-2\_9-10-28.png](attachments/26313543/40763443.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2020-6-5\_10-11-5.png](attachments/26313543/41517063.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-4-22\_11-47-42.png](attachments/26313543/41522638.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-4-22\_11-47-49.png](attachments/26313543/41522639.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-4-22\_11-48-21.png](attachments/26313543/41522640.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-4-22\_11-48-26.png](attachments/26313543/41522641.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:57

[Atlassian](http://www.atlassian.com/)