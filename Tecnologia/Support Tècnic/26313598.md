Suport Tècnic : PADRO - Generar una sol·licitud de certificat CSR  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.md)
4.  [Revisió de serveis](36340340.md)
5.  [PADRO - Revisions i Restabliment](PADRO---Revisions-i-Restabliment_118554712.md)
6.  [Padró - Instal·lació i manteniment](26313622.md)

Suport Tècnic : PADRO - Generar una sol·licitud de certificat CSR
=================================================================

Created by Unknown User (obernalp), last modified by Unknown User (otecobernal) on 10 September 2021

En aquest document s'explicarà com crear una sol·licitud de certificat (CSR) perquè els ajuntaments enviïn a l'AOC. La CA firmarà i validarà el CSR emetin un nou certificat que retornarà a l'Ens.

Aquest certificat és el que farem servir per configurar a l'aplicació del padró.

Normalment això ho fa l'ajuntament, tot i que alguns poden demanar ajuda per generar-ho.

Instal·lar openSSL

Per poder crear la sol·licitud necessitarem disposar del Software open SSL. Podem realitzar la instal·lació a la carpeta **C:\\**

Eina online

Podem accedir a una eina online que ens facilita la comanda per generar el CSR:

[https://www.digicert.com/es/easy-csr/openssl.htm](https://www.digicert.com/es/easy-csr/openssl.htm)

Haurem d'introduir les dades de l'Ajuntament:

![](attachments/26313598/26314923.png)

Finalment, podrem enganxar la comanda a una terminal:

![](attachments/26313598/26314926.png)

S'hauran generat els arxius a la carpeta indicada:

![](attachments/26313598/26314924.png)

Creació manual

Crear el CSR

  

1.  Crear una carpeta: (_exemple: certificate_)
2.  Obrir consola de comandes des de la carpeta creada (Pressionant la tecla shift i click secundari, veurem que posa "Abrir ventana de comandos aquí" )  
    ![](attachments/26313598/26317584.png)
3.  Un cop dins, definirem les variables temporals:
    
    Set RANDFILE=c:\\certificate\\.rnd
    Set OPENSSL\_CONF=c:\\OpenSSL-Win64\\bin\\openssl.cfg
    
    En el cas de linux hem de fer el següent (per saber el path del openssl: $openssl version -d)
    
    export RANDFILE=/u1/appHome/certs/Solicituds de certificats CSR/.rnd
    export OPENSSL\_CONF=/usr/share/ssl/openssl.cnf
    
4.  Iniciar OpenSSL:
    
    c:\\OpenSSL-Win64\\bin\\openssl.exe
    
5.  Crear el request
    
    req -new -nodes -keyout private.key -out public.csr -newkey 2048
    
    Per Linux hauré d'executar:
    
    openssl req -nodes -newkey rsa:2048 -keyout osiris.key -out osiris.csr
    
6.  Omplir amb les dades que demana. Podem demanar-les directament a l'Ajuntament per evitar confusions:
    
    Bon dia,
    
    Si necessiteu que procedim a generar el fitxer CSR, necessitaríem que ens indiquéssiu les següents dades:
    
    *   **Country Name** (2 letter code) \[AU\]: ES
    *   **State or Province Name** (full name): 
    *   **Locality Name** (eg, city): 
    *   **Organization Name** (eg, company): 
    *   **Organizational Unit Name** (eg, section): 
    *   **Common Name** (e.g. server FQDN or YOUR name):
    *   **Email Address**:
    
    Qualsevol cosa ens comenteu.
    
    Salutacions
    
      
    
7.  Un cop executada la comanda anterior, veurem 3 fitxers a la carpeta (_private.key,public.csr i \*.rnd_), el **public.csr** serà l'arxiu que haurem d'enviar a l'ajuntament perquè demani el certificat.
    
    L'arxiu generat anomenat **private.key** és molt important. És la clau privada del certificat i la necessitarem més endavant per general el .p12 que farà servir el servei del padró. En un principi, aquesta clau hauria de romandre sempre al servidor on pertany, per tant, si executem aquestes passes al nostre ordinador local, ens haurem d'assegurar de deixar-la al servidor.
    
      
    
    1.  **Opcional**: Podem comprovar que el CSR s'hagi generat correctament amb l'ajuda de [https://www.sslshopper.com/csr-decoder.html](https://www.sslshopper.com/csr-decoder.html).  
        ![](attachments/26313598/26317592.png)
8.  Ara l'ajuntament haurà de fer la sol·licitud del certificat des d'**EACAT**.

  

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2017-12-12\_11-8-24.png](attachments/26313598/26317584.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2017-12-12\_11-18-7.png](attachments/26313598/26317592.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-6-12\_9-6-15.png](attachments/26313598/26314925.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-6-12\_9-8-1.png](attachments/26313598/26314926.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-6-12\_9-10-1.png](attachments/26313598/26314924.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-6-12\_9-11-3.png](attachments/26313598/26314923.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:13

[Atlassian](http://www.atlassian.com/)