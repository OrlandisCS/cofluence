Projectes : ORACLE: D\_RI\_ATL\_RSI tables create (YYYY)  

1.  [Projectes](index.md)
2.  [PSIS](PSIS_24215797.md)
3.  [PSIS - WIKI](PSIS---WIKI_24215598.md)
4.  [Scripts SQL](Scripts-SQL_24215612.md)

Projectes : ORACLE: D\_RI\_ATL\_RSI tables create (YYYY)
========================================================

Created by Áurea Alcaide, last modified on 11 enero 2024

  

Script revisat a data 02-dic-2021 

Substituir YYYY per l'any en qüestió.

Substituir TABLESPACE\_NAME pel que correspongui segons l'entorn. Actualment, aquests són:

Entorn

TABLESPACE\_NAME

DEV PRE

PSIS\_PRE\_DAT

DEV PRO

PSIS\_PRO\_DAT

PRE

PPSIS\_N\_DAT

PRO MC JBoss

PSIS\_DAT

PRO MC WF

PSIS\_DATA

PRO NX

PSIS\_N\_DAT

\----------------------------------------------------------------
-- CREATE\_NEW\_TABLES
----------------------------------------------------------------

CREATE TABLE D\_RI\_ATL\_RSI\_YYYY (ID NUMBER(19,0), ISSUER\_DN BLOB, ISSUER\_KI BLOB, VALID\_UNTIL TIMESTAMP (6), RETRIEVALDATE TIMESTAMP (6), ASN1DATAID NUMBER(19,0), DISTRIBUTION\_POINT\_TYPE NUMBER(1,0)) TABLESPACE TABLESPACE\_NAME;
CREATE TABLE D\_RI\_ATL\_RSI\_ASN1\_YYYY (ID NUMBER, ASN1DATA BLOB) TABLESPACE TABLESPACE\_NAME;
CREATE TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY (ID NUMBER(19,0), CRL\_NUMBER NUMBER(10,0), NEXT\_UPDATE TIMESTAMP (6), VERSION NUMBER(10,0), THIS\_UPDATE TIMESTAMP (6), DISTRIBUTION\_POINT NUMBER(19,0)) TABLESPACE TABLESPACE\_NAME;
CREATE TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY (ID NUMBER(19,0), BASE\_CRL\_NUMBER NUMBER(10,0), BASE\_CRL\_ID NUMBER(19,0)) TABLESPACE TABLESPACE\_NAME;
CREATE TABLE D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY (ID NUMBER(19,0), PRODUCED\_AT TIMESTAMP (6), DISTRIBUTION\_POINT NUMBER(19,0)) TABLESPACE TABLESPACE\_NAME;
CREATE TABLE D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY (ID NUMBER(19,0), ISSUER\_DN\_DIGEST RAW(255), SERIAL\_NUMBER\_DIGEST RAW(255), OCSP\_RESPONSE NUMBER(19,0)) TABLESPACE TABLESPACE\_NAME;
COMMIT;


----------------------------------------------------------------
-- BUILD\_INDEXES
----------------------------------------------------------------

-- STARTING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_\*
CREATE UNIQUE INDEX SYS\_C0093020\_YYYY ON D\_RI\_ATL\_RSI\_YYYY (ID) TABLESPACE TABLESPACE\_NAME;
CREATE UNIQUE INDEX D\_RI\_ATL\_RSI\_ASN1\_YYYY ON D\_RI\_ATL\_RSI\_YYYY (ASN1DATAID) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_RSI\_VU\_YYYY ON D\_RI\_ATL\_RSI\_YYYY (VALID\_UNTIL) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_RSI\_RD\_YYYY ON D\_RI\_ATL\_RSI\_YYYY (RETRIEVALDATE) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX D\_RI\_ATL\_RSI\_I01\_YYYY ON D\_RI\_ATL\_RSI\_YYYY (DISTRIBUTION\_POINT\_TYPE, VALID\_UNTIL) TABLESPACE TABLESPACE\_NAME;
ALTER TABLE D\_RI\_ATL\_RSI\_YYYY MODIFY (ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_YYYY MODIFY (ISSUER\_DN NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_YYYY MODIFY (ISSUER\_KI NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_YYYY MODIFY (DISTRIBUTION\_POINT\_TYPE NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_YYYY ADD PRIMARY KEY (ID);
-- ENDING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_\*
-- STARTING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_ASN1\_\*
CREATE UNIQUE INDEX D\_RI\_ATL\_RSI\_ASN1\_PK\_YYYY ON D\_RI\_ATL\_RSI\_ASN1\_YYYY (ID) TABLESPACE TABLESPACE\_NAME;
ALTER TABLE D\_RI\_ATL\_RSI\_ASN1\_YYYY ADD CONSTRAINT D\_RI\_ATL\_RSI\_ASN1\_PK\_YYYY PRIMARY KEY (ID);
ALTER TABLE D\_RI\_ATL\_RSI\_ASN1\_YYYY MODIFY (ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_ASN1\_YYYY MODIFY (ASN1DATA NOT NULL ENABLE);
-- ENDING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_ASN1\_\*
-- STARTING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_CRLS\_\*
CREATE UNIQUE INDEX SYS\_C00231172\_YYYY ON D\_RI\_ATL\_RSI\_CRLS\_YYYY (ID) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_CRL\_DIST\_POINT\_YYYY ON D\_RI\_ATL\_RSI\_CRLS\_YYYY (DISTRIBUTION\_POINT) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_CRL\_THIS\_UPDATE\_YYYY ON D\_RI\_ATL\_RSI\_CRLS\_YYYY(THIS\_UPDATE) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX DX\_REV\_CRL\_THISUP\_DISTPT\_YYYY ON D\_RI\_ATL\_RSI\_CRLS\_YYYY(THIS\_UPDATE, DISTRIBUTION\_POINT) TABLESPACE TABLESPACE\_NAME;
ALTER TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY MODIFY (ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY MODIFY (VERSION NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY MODIFY (CRL\_NUMBER NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY ADD PRIMARY KEY (ID);
alter table D\_RI\_ATL\_RSI\_CRLS\_YYYY ADD CONSTRAINT D\_RI\_ATL\_RSI\_CRLS\_U01\_YYYY UNIQUE (CRL\_NUMBER, DISTRIBUTION\_POINT) USING INDEX;
-- ENDING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_CRLS\_\*
-- STARTING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_DELTACRLS\_\*
CREATE UNIQUE INDEX SYS\_C00231173\_YYYY ON D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY (ID) TABLESPACE TABLESPACE\_NAME;
ALTER TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY MODIFY (ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY MODIFY (BASE\_CRL\_NUMBER NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY MODIFY (BASE\_CRL\_ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY ADD PRIMARY KEY (ID);
-- ENDING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_DELTACRLS\_\*
-- STARTING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_RESP\_\*
CREATE UNIQUE INDEX SYS\_C00231174\_YYYY ON D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY (ID) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_OCSP\_DIST\_POINT\_YYYY ON D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY (DISTRIBUTION\_POINT) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_OCSP\_PRODUCED\_AT\_YYYY ON D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY (PRODUCED\_AT) TABLESPACE TABLESPACE\_NAME;
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY MODIFY (ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY MODIFY (PRODUCED\_AT NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY ADD PRIMARY KEY (ID);
-- ENDING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_RESP\_\*
-- STARTING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_SRESP\_\*
CREATE UNIQUE INDEX SYS\_C00231175\_YYYY ON D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY (ID) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_OCSP\_SRESP\_CERT\_YYYY ON D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY (SERIAL\_NUMBER\_DIGEST, ISSUER\_DN\_DIGEST) TABLESPACE TABLESPACE\_NAME;
CREATE INDEX IDX\_REV\_OCSP\_SRESP\_RESP\_YYYY ON D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY (OCSP\_RESPONSE) TABLESPACE TABLESPACE\_NAME;
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY MODIFY (ID NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY MODIFY (ISSUER\_DN\_DIGEST NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY MODIFY (SERIAL\_NUMBER\_DIGEST NOT NULL ENABLE);
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY ADD PRIMARY KEY (ID);
-- ENDING INDEX BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_SRESP\_\*


----------------------------------------------------------------
-- BUILD\_FIREIGN\_KEYS
----------------------------------------------------------------

-- STARTING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_\*
ALTER TABLE D\_RI\_ATL\_RSI\_YYYY ADD CONSTRAINT FK61CF54355F7F3B9A\_YYYY FOREIGN KEY (ASN1DATAID) references D\_RI\_ATL\_RSI\_ASN1\_YYYY(ID);
-- ENDING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_\*
-- STARTING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_CRLS\_\*
ALTER TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY ADD CONSTRAINT FK1E707000CF9B99FC\_YYYY FOREIGN KEY (ID) references D\_RI\_ATL\_RSI\_YYYY(ID);
ALTER TABLE D\_RI\_ATL\_RSI\_CRLS\_YYYY ADD CONSTRAINT FK1E7070001C0A98CC\_YYYY FOREIGN KEY (DISTRIBUTION\_POINT) references D\_RI\_ATL\_DPOINTS\_CRL(ID);
-- ENDING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_CRLS\_\*
-- STARTING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_DELTACRLS\_\*
ALTER TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY ADD CONSTRAINT FKD9933A44E3BE5E86\_YYYY FOREIGN KEY (BASE\_CRL\_ID) references D\_RI\_ATL\_RSI\_CRLS\_YYYY(ID);
ALTER TABLE D\_RI\_ATL\_RSI\_DELTACRLS\_YYYY ADD CONSTRAINT FKD9933A446CF0CBB6\_YYYY FOREIGN KEY (ID) references D\_RI\_ATL\_RSI\_CRLS\_YYYY(ID);
-- ENDING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_DELTACRLS\_\*
-- STARTING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_RESP\_\*
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY ADD CONSTRAINT FKD5E74494D62FD080\_YYYY FOREIGN KEY (DISTRIBUTION\_POINT) references D\_RI\_ATL\_DPOINTS\_OCSP(ID);
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY ADD CONSTRAINT FKD5E74494CF9B99FC\_YYYY FOREIGN KEY (ID) references D\_RI\_ATL\_RSI\_YYYY(ID);
-- ENDING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_RESP\_\*
-- STARTING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_SRESP\_\*
ALTER TABLE D\_RI\_ATL\_RSI\_OCSP\_SRESP\_YYYY ADD CONSTRAINT FKE7151A5F7670F460\_YYYY FOREIGN KEY (OCSP\_RESPONSE) references D\_RI\_ATL\_RSI\_OCSP\_RESP\_YYYY(ID);
-- ENDING FOREIGN KEYS BUILDING TABLES D\_RI\_ATL\_RSI\_OCSP\_SRESP\_\*
COMMIT;

Document generated by Confluence on 07 junio 2025 00:00

[Atlassian](http://www.atlassian.com/)