Suport Tècnic : GLOBAL - FLUX DEL SERVEI - ERRORS - Error en el procés d'autenticació. WS-Security > Signature verification failed  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's Global](28705585.md)

Suport Tècnic : GLOBAL - FLUX DEL SERVEI - ERRORS - Error en el procés d'autenticació. WS-Security > Signature verification failed
==================================================================================================================================

Created by Unknown User (oteccmorales), last modified by Unknown User (otecjlortega) on 24 November 2022

l'error "_Signature verification failed_" vol dir que la signatura del missatge està trencada quan arriba al SIRI i és després que es comprova que el certificat amb el que es signen les peticions sigui el que l'ens té associat al SIRI, etc.

Step-by-step guide
------------------

Quan ens traslladen un error d'aquests hem de fer les següents validacions:

Accions a realitzar:

1.  1.  Hem de demanar l'XML de la petició amb la capçalera de seguretat
    2.  Agafem el certificat:
        1.  ![](attachments/81854913/81854914.png)
        2.  El copiem en un document nou i el guardem com XXXX.cer
        3.  ![](attachments/81854913/81854915.png)
        4.  Validem que és el mateix certificat que tenim configurat en la BBDD (el CDA del SIRI)
    3.  CErquem els logs del SIRI (SWATProxy) → [SIRI - ALTRES - LOGS](SIRI---ALTRES---LOGS_30870093.md)
        
        1.  Cerquem per l'error: 
        2.  ![](https://aoccat.zendesk.com/attachments/token/QonolclJr7ODH0DgQP7HAHA0a/?name=image.png)

Amb això sembla que el problema es de l'integrador que ens envia la signatura trencada.

Missatge de resposta

Bon dia,

El que veiem és que la signatura arriba trencada al nostre servidor. Lamentablement, les traces en els logs de la nostra aplicació no arriben al nivell de mostrar la raó per la qual la signatura arriba trencada al nostre servidor, i no tenim manera de validar-la.

Per part nostra, no podem fer més validacions del missatge XML que envieu; únicament indicar-vos que l'error és conseqüència que la signatura de la petició arribi trencada.

Disculpeu les molèsties,

  

Si l'usuari ens respon insistint que la signatura  es correcte, es possible que la firma al XML estigui tabulada, ja que aixó pot resultar en que ens arribi una signatura trencada.

![](attachments/81854913/81854991.png)
--------------------------------------

Si la firma esta tabulada aixó pot trencar-la i generar l'error. En aquest cas els hi enviem aquest missatge tipus:

Missatge de resposta en cas de tabulació

Bon dia,

Hem revisat l'XML que ens hau adjuntat i hem observat que la signatura esta tabulada:

_**<opcional: adjuntem una imatge de l'XML de la part affectada>**_

Si la signatura esta tabulada, aixó pot trencar-la i generar l'error que heu obtingut. Proveu de desfer la tabulació i tornar-ho a intentar.

Salutacions

  

Related articles
----------------

  

Related issues

ZD#41624/  [PRJ-2594](https://contacte.aoc.cat/browse/PRJ-2594?src=confmacro) - Data cannot be retrieved due to an unexpected error.

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2022-11-15\_16-0-28.png](attachments/81854913/81854914.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-11-15\_16-2-53.png](attachments/81854913/81854915.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2022-11-24\_11-57-20.png](attachments/81854913/81854991.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:55

[Atlassian](http://www.atlassian.com/)