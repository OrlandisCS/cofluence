Projectes : E\_EM\_ATL tables size  

1.  [Projectes](index.md)
2.  [PSIS](PSIS_24215797.md)
3.  [PSIS - WIKI](PSIS---WIKI_24215598.md)
4.  [Scripts SQL](Scripts-SQL_24215612.md)

Projectes : E\_EM\_ATL tables size
==================================

Created by Áurea Alcaide, last modified on 22 abril 2020

**1.-** Amb taules d'evidències "aplanades":  

Incloent LOBS:

SELECT OWNER,SEGMENT\_NAME,SUM(BYTES)/1024/1024/1024 "LOB size (GB)"
FROM DBA\_SEGMENTS
WHERE SEGMENT\_NAME IN
    (
    SELECT SEGMENT\_NAME
    FROM DBA\_LOBS WHERE TABLE\_NAME='E\_EM\_ATL\_SERIALIZED\_RECORD'
    )
GROUP BY OWNER,SEGMENT\_NAME;

A DEV (doncs no tenim permisos de DBA):

SELECT SUM(BYTES)/1024/1024 "LOB size (MB)"
FROM USER\_SEGMENTS
WHERE SEGMENT\_NAME IN
    (
    SELECT SEGMENT\_NAME
    FROM USER\_LOBS WHERE TABLE\_NAME='E\_EM\_ATL\_SERIALIZED\_RECORD'
    )
;

Sense LOBS:

select bytes/1024/1024 E\_EM\_ATL\_SERIALIZED\_RECORD\_MB from user\_segments where segment\_name='E\_EM\_ATL\_SERIALIZED\_RECORD';
select bytes/1024/1024 E\_EM\_ATL\_EVIDENCE\_SH\_BLOB\_MB from user\_segments where segment\_name='E\_EM\_ATL\_EVIDENCE\_SH\_BLOB';
select bytes/1024/1024 E\_EM\_ATL\_EVIDENCE\_SH\_CLOB\_MB from user\_segments where segment\_name='E\_EM\_ATL\_EVIDENCE\_SH\_CLOB';

**2.-** Si estem treballant amb taules d'evidències sense aplanar:

**IMPORTANT**: Obsolet, doncs ja treballem a tots els entorns exclussivament amb les taules aplanades. Ho afegeixo igualment perquè es pot canviar la configuració a PSIS i fer que treballi de nou amb les taules sense aplanar.

select bytes/1024/1024 E\_EM\_ATL\_AUDIT\_RECORDS\_MB from user\_segments where segment\_name='E\_EM\_ATL\_AUDIT\_RECORDS';
select bytes/1024/1024 E\_EM\_ATL\_EVIDENCE\_SH\_BLOB\_MB from user\_segments where segment\_name='E\_EM\_ATL\_EVIDENCE\_SH\_BLOB';
select bytes/1024/1024 E\_EM\_ATL\_EVIDENCE\_SH\_CLOB\_MB from user\_segments where segment\_name='E\_EM\_ATL\_EVIDENCE\_SH\_CLOB';
select bytes/1024/1024 E\_EM\_ATL\_EVIDENCE\_VALUES\_MB from user\_segments where segment\_name='E\_EM\_ATL\_EVIDENCE\_VALUES';
select bytes/1024/1024 E\_EM\_ATL\_EVIDENCES\_MB from user\_segments where segment\_name='E\_EM\_ATL\_EVIDENCES';
select bytes/1024/1024 E\_EM\_ATL\_RECORD\_MB from user\_segments where segment\_name='E\_EM\_ATL\_RECORD';
select bytes/1024/1024 E\_EM\_ATL\_RECORD\_CONTEXTS\_MB from user\_segments where segment\_name='E\_EM\_ATL\_RECORD\_CONTEXTS';
select bytes/1024/1024 E\_EM\_ATL\_VALUED\_ATTRIBUTES\_MB from user\_segments where segment\_name='E\_EM\_ATL\_VALUED\_ATTRIBUTES';

**3.-** Si volem afegir el tamany de l'índex:

Query per recuperar el nom de l'índex de la taula E\_EM\_ATL\_SERIALIZED\_RECORD:

SELECT DISTINCT TABLE\_NAME,INDEX\_NAME FROM USER\_IND\_COLUMNS WHERE TABLE\_NAME='E\_EM\_ATL\_SERIALIZED\_RECORD';

Query per recuperar el tamany de la taula i del seu índex (substituir INDEX\_NAME pel nom corresponent):

SELECT SEGMENT\_NAME, SUM(BYTES)/1024/1024 "LOB size (MB)"
FROM USER\_SEGMENTS
WHERE SEGMENT\_NAME IN
    (SELECT SEGMENT\_NAME FROM USER\_LOBS WHERE (TABLE\_NAME='E\_EM\_ATL\_SERIALIZED\_RECORD'))
OR SEGMENT\_NAME='INDEX\_NAME'
GROUP BY SEGMENT\_NAME;

Document generated by Confluence on 07 junio 2025 00:00

[Atlassian](http://www.atlassian.com/)