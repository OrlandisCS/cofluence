Suport Tècnic : REPRESENTA - INTEGRACIÓ -Alta de Integració amb arxiu EXCEL  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's REPRESENTA](28705611.md)

Suport Tècnic : REPRESENTA - INTEGRACIÓ -Alta de Integració amb arxiu EXCEL
===========================================================================

Created by Unknown User (otecjcolomer), last modified by Unknown User (oteccmorales) on 15 November 2022

Procés d'alta

Hem de tenir en compte que **les integracions** **abans de donar d'alta a una entitat a l'entorn de PRODUCCIÓ s'ha de donar d'alta a PREPRODUCCIÓ** i validar que els consums es realitzen correctament.

**INTEGRACIÓ DELS ENS AMB ARXIU EXCEL (NOU MÈTODE)**

A PARTIR DEL 18/07/2022

Arran d'una petició d'un company, hem adoptat un nou mètode d'integració pel servei de Representa, que és el mateix que es venia utilitzant per a d'altres serveis.

Aquí podem trobar un arxiu excel d'exemple de com s'haurien d'adjuntar els ens perquè realitzem la integració: _(Descarregar per veure l'arxiu adequadament)_

[Exemple d'integració per a utlitzar amb Representa.xls](attachments/64982009/64982012.xls)

  

Adjuntem correu on s'ha tractat la qüestió del canvi de mètode a l'hora de gestionar les integracions dels ens al servei de Representa:

[CORREU Configuració integració Representa amb gestor primers ajuntaments.msg](attachments/64982009/64982011.msg)

**1- MISSATGE INFORMATIU l'ENS/INTEGRADOR (Quan ens demanin per la integració)**

ALTA INTEGRACIÓ

Per tal de realitzar les proves webService a l’entorn de preproducció, necessitaríem per part vostre les IPs públiques amb les quals accedireu als nostres entorns.

Addicionalment, la clau pública (.cer) del certificat CDA amb el qual signareu les peticions XML via webService.

En el següent link podeu descarregar el formulari d’integració on podeu informar les IPs junt amb les altres dades necessàries, i ens el feu arribar signat digitalment en format PDF:

[https://suport-integradors.aoc.cat/hc/ca/articles/4416407051665-Quines-dades-necessita-el-Consorci-AOC-per-integrar-me-amb-el-servei-](https://suport-integradors.aoc.cat/hc/ca/articles/4416407051665-Quines-dades-necessita-el-Consorci-AOC-per-integrar-me-amb-el-servei-)

  

En cas que us integreu via webservice per primera vegada amb els serveis del Consorci AOC, necessitareu la documentació d’integració de la Plataforma de Col·laboració Interadministrativa (PCI). Per poder consumir els serveis del Consorci AOC, cal fer-ho a través de la PCI. La PCI és un conjunt de sistemes i components orientats a la total disponibilitat dels serveis amb garanties de màxima seguretat en el servei i en l’accés a les dades. La documentació següent conté les especificacions de la missatgeria de la PCI.

  

El Consorci AOC, amb l’objectiu de facilitar el desenvolupament de les integracions, posa a la vostra disposició els següents clients d’exemple de la PCI:

[https://suport-integradors.aoc.cat/hc/ca/articles/7352984409757-Documentaci%C3%B3-gen%C3%A8rica-per-a-integrar-se-a-la-PCI](https://suport-integradors.aoc.cat/hc/ca/articles/7352984409757-Documentaci%C3%B3-gen%C3%A8rica-per-a-integrar-se-a-la-PCI)

  

La documentació d’integració específica del servei sol·licitat, la teniu disponible a:

Documentació integració i Esquemes >>[https://consorciaoc.github.io/Representa/](https://consorciaoc.github.io/Representa/)

  

Per procedir a la sol·licitud d'alta d'integració haureu d'omplir el formulari que trobareu ([aqu](https://suport-integradors.aoc.cat/hc/ca/articles/4416407051665-Quines-dades-necessita-el-Consorci-AOC-per-integrar-me-amb-el-servei-)í) i signar-lo  format PDF.

Recordeu que juntament amb el formulari haureu d'adjuntar la clau publica del certificat (CDA) amb el que signareu les peticions via PCI, amb format .cer o .txt. No oblideu d'informar les IP's des d'on fareu els consums.  

Posteriorment us donarem permisos d'autorització i autenticació en l'entorn de **PREPRODUCCIÓ**. Un cop realitzada la integració en aquest entorn i s'hagi validat el correcte funcionament podrem procedir a donar-vos permisos a l'entorn de **PRODUCCIÓ**.

A més, informar-vos que de totes les operacions que fa **_REPRESENTA_**, per ara només es permeten dos en integració:

\-          validarRepresentacio ( 3.6.3 Validació)

\-          consultarRepresentacio (3.6.2 Consulta de representació)

\-          consultarRepresentacions (3.6.1 Consulta de representacions)

  

**2 - PROCEDIMENT INTEGRACIÓ**

1.  Informar l'ens que ens ha d'enviar la sol·licitud d'alta a la integració de REPRESENTA.   
    Aquesta sol·licitud:
    1.  Han de informar correctament les dades de l'ens que s'integra
    2.  Ha d'estar signada i desada amb format PDF
    3.  Han de informar de les IP'S per carregar-les als nostres sistemes
    4.  Han d'adjuntar el CDA per carregar al SIRI  
          
        
2.  Procedirem amb la integració:
    1.  Realitzarem els pasos genèrics per una integració (Autorització, Autenticació): [GLOBAL - INTEGRACIÓ - Altes de Serveis](/pages/createpage.action?spaceKey=SII&title=GLOBAL+-+INTEGRACI%C3%93+-+Altes+de+Serveis&linkCreation=true&fromPageId=64982009) 
    2.  IPs: Configurar les IPS en el context del SIRI-PROXY de PRE (PCI2 i PCI3) [GLOBAL - INTEGRACIÓ - Configuració d'IP's](26313331.md). Tenir en compte que al fitxer de configuració de serveis3 APP, s'ha de configurar l'IP també en el context **<Location /representa-core/informe>.**
    3.  Donarem d'alta a l'ens al REPRESENTA en l'entorn de pre-producció (Projecte SOAPUI) [REPRESENTA - ALTA SERVEI - Alta Servei](REPRESENTA---ALTA-SERVEI---Alta-Servei_26313504.md)
    4.  Respondrem 
        
        Missatge per a finalitzar la gestió
        
        Benvolguts,
        
        Per tal de fer el salt de l'entorn de Proves a l'entorn de Producció, i per al servei **Representa,** cal que ens faciliteu el document d'homologació amb el joc de proves omplert.
        
        Aquest document d'homologació podeu trobar-lo a la següent FAQ: [https://github.com/ConsorciAOC/Homologacio-Serveis](https://github.com/ConsorciAOC/Homologacio-Serveis)
        
        Una vegada rebem per part vostre el document_,_ realitzarem unes revisions internes per validar que la integració amb l'entorn de proves s'hagi realitzat correctament i procedirem a donar-vos l'alta a l'entorn de PRODUCCIÓ.
        
        Per fer-nos arribar el document d'homologació, haureu d'obrir un nou tiquet fent referència a aquest i adjuntant el document omplert. Tanquem aquest tiquet perquè s'obrirà d'un nou per tractar el salt a l'entorn de producció.
        
        De moment us hem proporcionat les autoritzacions necessàries per poder consumir el servei sol·licitat a l’entorn de PREPRODUCCIÓ. 
        
        Preproducció
        
          
        
          
        
          
        
          
        
          
        
        NOM\_PRODUCTE
        
        CODI\_PRODUCTE
        
        NOM\_MODALITAT
        
        CODI\_MODALITAT
        
        NOM\_FINALITAT
        
        CODI\_FINALITAT
        
        Representa
        
        REPRESENTA
        
        Consulta de representació
        
        REPRESENTA\_CONSULTA
        
        Proves
        
        PROVES
        
        Representa
        
        REPRESENTA
        
        Validació de la representació
        
        REPRESENTA\_VALIDACIO
        
        Proves
        
        PROVES
        

  

**3 - PROVES i VALIDACIONS**

**3.1 PROVES SOAPUI**

Les peticions que enviïn seran del tipus PCI amb les dades específiques per la missatgeria de Representa.

**De totes les operacions que fa Representa, per ara només es permeten 2 per als integradors que venen via PCI**:

*   *   validarRepresentacio
    *   consultarRepresentacio
    *   consultarRepresentacions

  

Per validar l’estructura de la part específica podeu generar-vos un projecte a partir dels WSDL (els wsdl són més genèrics i tenen més operacions de les permeses als integradors però les 3 permeses són iguals):

*   *   [http://admin3.app.aoc.cat/representa-core/validacionsService?WSDL](http://admin3.app.aoc.cat/representa-core/validacionsService?WSDL) >> aquí trobareu una petició del tipus _validarRepresentacio_
    *   [http://admin3.app.aoc.cat/representa-core/consultesService?WSDL](http://admin3.app.aoc.cat/representa-core/consultesService?WSDL) >> aquí trobareu una petició del tipus _consultarRepresentacions_
    *   [http://admin3.app.aoc.cat/representa-core/consultesService?WSDL](http://admin3.app.aoc.cat/representa-core/consultesService?WSDL) >> aquí trobareu una petició del tipus _consultarRepresentacio_

_[![](download/resources/com.atlassian.confluence.plugins.confluence-view-file-macro:view-file-macro-resources/images/placeholder-small-zip.png)representa\_proves\_integracio.zip](/download/attachments/64982009/representa_proves_integracio.zip?version=1&modificationDate=1658146436365&api=v2) projecte per realitzar les proves d'integració._ 

**3.2 VALIDACIONS ABANS DE PASSAR A PRODUCCIÓ**

Per ara només poden consultar i validar.

Una bona prova seria tenir una representació de test, fer que l’ens la consulti i ens confirmi que rep una resposta concreta (l'ens ens ha de passar la resposta esperada). 

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [representa\_proves\_integracio.zip](attachments/64982009/64982010.zip) (application/zip)  
![](images/icons/bullet_blue.gif) [CORREU Configuració integració Representa amb gestor primers ajuntaments.msg](attachments/64982009/64982011.msg) (application/vnd.ms-outlook)  
![](images/icons/bullet_blue.gif) [Exemple d'integració per a utlitzar amb Representa.xls](attachments/64982009/64982013.xls) (application/vnd.ms-excel)  
![](images/icons/bullet_blue.gif) [Exemple d'integració per a utlitzar amb Representa.xls](attachments/64982009/64982012.xls) (application/vnd.ms-excel)  

Document generated by Confluence on 02 June 2025 10:59

[Atlassian](http://www.atlassian.com/)