Projectes : DB resource locking  

1.  [Projectes](index.md)
2.  [PSIS](PSIS_24215797.md)
3.  [PSIS - WIKI](PSIS---WIKI_24215598.md)
4.  [Scripts SQL](Scripts-SQL_24215612.md)

Projectes : DB resource locking
===============================

Created by Áurea Alcaide, last modified on 08 julio 2022

How to check db resource locking?

select c.owner, c.object\_name, c.object\_type, b.sid,
b.serial#, b.status, b.osuser, b.machine, b.PROCESS, a.locked\_mode
from v$locked\_object a ,
v$session b,
dba\_objects c
where b.sid = a.session\_id
and a.locked\_mode in (3,6)  --- 3 -> Row Exclusive Table Lock / 6 -> Exclusive Table Lock
and a.object\_id = c.object\_id;

  

How to check db session status?

set linesize 80;
set pagesize 60;
set newpage 0;
set lines 1000;
select substr(a.spid,1,9) pid, substr(b.sid,1,5) sid, substr(b.machine,1,6) box, 
substr(b.username,1,10) username, substr(b.osuser,1,8) os\_user, 
substr(b.program,1,30) program,status
from v$session b, v$process a where b.paddr = a.addr 
and type='USER' order by spid;

  

How to check what the session is waiting for?

select wait\_class, event, sid, state, wait\_time, seconds\_in\_wait
from v$session\_wait
where sid=<provide the waiting sid you get from above query>
order by wait\_class, event, sid
/
select BLOCKING\_SESSION\_STATUS, BLOCKING\_SESSION
from v$session
where sid = <provide the waiting sid you get from above query>
select \* from v$session\_wait\_class where sid =
<provide the waiting sid you get from above query>;
select substr(b.machine,1,6) box, substr(b.username,1,10) username, 
substr(b.osuser,1,8) os\_user, substr(b.program,1,30) program,status
from v$session b, v$process a where b.paddr = a.addr and type='USER'
and b.program like '%yourprogramname%' order by spid;
select sid, serial#, username
from v$session where sid in
(select blocking\_session from v$session)

  

You can also use the alert logs to trace the error:

alert logs:  
$ORACLE\_HOME/admin/../diag/rdbms/$ORACLE\_ID/$ORACLE\_ID/trace

  

select \* from dba\_locks where SUBSTR like 'Transaction' and SUBSTR like 'Exclusive' and SUBSTR like 'Blocking';
select \* from dba\_locks where lock\_type like 'Transaction' and MODE\_HELD like 'Exclusive';-- and SUBSTR like 'Blocking';

Document generated by Confluence on 07 junio 2025 00:00

[Atlassian](http://www.atlassian.com/)