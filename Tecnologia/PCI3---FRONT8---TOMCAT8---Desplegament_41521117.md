Suport Tècnic : PCI3 - FRONT8 - TOMCAT8 - Desplegament  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.html)
4.  [Plataformes](Plataformes_41520520.html)
5.  [PCI3 - FRONT8 - TOMCAT8](PCI3---FRONT8---TOMCAT8_41521115.html)

Suport Tècnic : PCI3 - FRONT8 - TOMCAT8 - Desplegament
======================================================

Created by Unknown User (otecjriquelme), last modified by Joan Riquelme on 02 April 2025

Consideracions prèvies
----------------------

Probe del Tomcat:

Entorn

Node 1

Node 2

PRE

[http://10.120.2.17:8080/probe](http://10.120.2.17:8080/probe)

[http://10.120.2.18:8080/probe](http://10.120.2.18:8080/probe)

PRO

[http://10.120.1.4:8080/probe](http://10.120.1.4:8080/probe)

[http://10.120.1.11:8080/probe](http://10.120.1.11:8080/probe)

Ens pot servir per veure si les aplicacions estan funcionant (columna **STATUS**),  
rebent peticions (columna **REQUEST**) després de desplegar..

Pas 0: Fem backup
-----------------

Descarreguem el WAR de la ruta _/apps/tomcat8/webapps/_ i el guardem en una carpeta de backup. En xarxa a la ruta: \\\\192.168.166.33\\Desplegaments\\2020\\....

  

Pas 1: Esborrar l'aplicació desplegada via PROBE
------------------------------------------------

Accedir al probe de la plataforma. URL's al principi de la FAQ.

Hem de clicar en el status de "running" en l'aplicació, esperar que s'aturi, i després d'eliminar l'aplicació: 

![](attachments/41521117/41521124.png)

  

Pas 3: Desplegar el nou WAR.
----------------------------

Un cop eliminada l'aplicació, anem per shell al servidor i **copiem el war a desplegar a la ruta** **_/apps/tomcat8/webapps/_**

Només amb això el tomcat8 ja sap que té una aplicació nova a desplegar. Revisarem el catalina per veure que tot va correctament –> **_tail -f /apps/tomcat8/logs/catalina.out_**

Pas 4: Desplegar a tots els nodes.
----------------------------------

Caldrà repetir aquest procediment per cada un dels nodes on calgui desplegar l'aplicació, generalment tots.

Pas 5: Validacions internes.
----------------------------

Hi han dues maneres diferents de realitzar les validacions:

*   A nivell de fitxers → Revisar que tots els fitxers i carpetes s'han modificat correctament
*   Validació JIRA → Realitzar validació que indiquen al JIRA →  Normalment s'encarrega l'OT

  

Bonus track: Desplegar un standalone.
-------------------------------------

Si hem de desplegar un .jar que funciona com un standalone, per exemple e-tauler-ciutadà.jar, llavors ho fem de la següent manera

Pas1: Backup

Pas 2: pujar el nou paquet a la ruta. En el cas de l'exemple: /home/tomcat8/ETAULER

Pas 3: fer un stop i un start del component en concret

**Parem i aixequem l'aplicació**

sudo systemctl stop etauler-ciutada

sudo systemctl start etauler-ciutada

  

  

  

  

  

  

  

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2021-2-8\_14-22-39.png](attachments/41521117/41521124.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:16

[Atlassian](http://www.atlassian.com/)