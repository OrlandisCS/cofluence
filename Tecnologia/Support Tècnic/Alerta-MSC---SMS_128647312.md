Suport Tècnic : Alerta MSC - SMS  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [03 - Monitorització - Revisions globals](26313327.md)
4.  [Dynatrace - Alertes de correu](Dynatrace---Alertes-de-correu_128647310.md)

Suport Tècnic : Alerta MSC - SMS
================================

Created by David Tejada, last modified by Cristian Morales on 30 May 2025

Existeix una alerta que ens avisa quan hi ha alguna aplicació que supera els 9 elements en 5 minuts que ha generat error.

  

El correu que es rep és simular a aquest:

![](attachments/128647312/128647313.png)

  

Caldria revisar si realment és un error puntual o comencem a tenir problemes.

  

De primera, podem revisar el dashboard de Dynatrace → PRO Bizevents MSC

  

  

[https://aes56028.apps.dynatrace.com/ui/apps/dynatrace.dashboards/dashboard/165f97d1-75a0-45d0-86ac-099691ed6f45#from=-2h&to=now%28%29&tileIds=5](https://aes56028.apps.dynatrace.com/ui/apps/dynatrace.dashboards/dashboard/165f97d1-75a0-45d0-86ac-099691ed6f45#from=-2h&to=now%28%29&tileIds=5)

  

![](attachments/128647312/128647314.png)

  

Si els errors comencen a créixer per tots els serveis, caldria revisar que no tinguem problemes amb l'endpoint de SMS.

  

Podem veure informació associada de les peticions executant les següents query's:

  

fetch bizevents  
| filter event.category=="msc"  
| filter [dt.host\_group.id](http://dt.host_group.id)\=="PRO\_FRONTEND"  
| filter isNotNull(PayloadSortida)  
| parse PayloadSortida, "DATA {1,1000000} 'Operacio>' LD:operacio '</' DATA;"  
| parse PayloadSortida, "DATA {1,1000000} 'Aplicacio>' LD:aplicacio '</' DATA;"  
| parse PayloadSortida, "DATA {1,1000000} 'Organisme>' LD:organisme '</' DATA;"  
// Resultat de la petició a la MTI, si s'ha pogut realitzar la peticio  
| parse PayloadSortida, "DATA {1,1000000} 'CodiEstat>' LD:resultat '</' DATA;"  
| parse PayloadSortida, "DATA {1,1000000} 'LiteralError>' LD:MissatgeError '</' DATA;"

// Resultat de negoci si ha anat bé o malament.  
| parse PayloadSortida, "DATA {1,1000000} 'estat>' LD:estat '</' DATA;"  
| parse PayloadSortida, "DATA {1,1000000} 'missatgeError>' LD:missatgeNegoci '</' DATA;"  
| filter matchesPhrase(operacio, "ENVIAR\_SMS")  
| filter (estat!="OK" or resultat!="0003")

I obtindrem una taula amb els errors:

![](attachments/128647312/128647315.png)

En la query podem anar modificant les dades per obtenir la informació que ens faci falta. Pero aqui es podrà veure el perquè està fallant.

Si anem a veure la informació del trace\_id:

![](attachments/128647312/128647316.png)

![](attachments/128647312/128647317.png)

![](attachments/128647312/128647318.png)

Aqui podrem veure quin és el motiu de l'error.

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2025-4-4\_15-56-3.png](attachments/128647312/128647313.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-4-4\_15-57-45.png](attachments/128647312/128647314.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-4-4\_16-1-55.png](attachments/128647312/128647315.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-4-4\_16-4-52.png](attachments/128647312/128647316.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-4-4\_16-5-21.png](attachments/128647312/128647317.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-4-4\_16-6-55.png](attachments/128647312/128647318.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:11

[Atlassian](http://www.atlassian.com/)