Suport Tècnic : Monitor S.T. - e-NOTUM - Notificacions sense dipositar últimes 2 hores - NT\_Lite  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [03 - Monitorització - Revisions globals](26313327.html)
4.  [Monitors S.T.](Monitors-S.T._41522177.html)
5.  [Monitors S.T. - e-NOTUM](Monitors-S.T.---e-NOTUM_128647222.html)

Suport Tècnic : Monitor S.T. - e-NOTUM - Notificacions sense dipositar últimes 2 hores - NT\_Lite
=================================================================================================

Created by Unknown User (otecjriquelme), last modified by OTEC ST Alessandro Trombin Martinez on 02 March 2022

**Query:**

select count(id) REGISTRES
from nt\_lite.nt\_notificacions nn
where nn.estat = 'ENTRADA'
and nn.datacreacio >= sysdate - 2 / 24

**Descripció:** 

Compta les notificacions que no s'han dipositat en les últimes dues hores

Aquestes notificacions estan en l'estat previ a DIPOSITADA → **ENTRADA**

Poden estar en aquest estat degut principalment a dos causes:

*   La notificació encara no ha sigut tractada per el RDBMS o pel WL12
*   La notificació ha sigut tractada i ha fallat en el dipòsit. A NT-LITE no existeixen els estats d'error, si falla queda en l'estat anterior (ENTRADA)

Podem diferenciar aquests dos casos mirant a la taula nt\_lite.nt\_events\_motor:

**Revisiode la motor**

select \* 
from nt\_lite.nt\_events\_motor mm
where notificacio\_id in ();

*   Veurem si la notificació que no s'ha dipositat ha fet algun intent i ha fallat

  

**Anàlisi:** 

**Revisem que el RDMBS funciona** → Llencem la següent query i veiem que els registres van baixant:

**Revisar si RDBMS processa**

select count(ID) 
from NT\_EVENTS\_MOTOR 
where ESTAT = 'ESPERA' 
and DATAEXECUCIO < CURRENT\_TIMESTAMP

*   En cas que els registres no baixin, només pugin, podem provar a recrear el RDBMS.

  

En cas que el RDBMS funcioni correctament, revisem els logs per les notificacions que estan donant error en la motor:

**Revisem que la notificació ha fallat a la motor**:

**Revisiode la motor**

select \* 
from nt\_lite.nt\_events\_motor mm
where notificacio\_id in ();

*   Si ha fallat haurien de veure que el tipus\_event = Dipositar està amb reintents>0.
*   Si esta amb reintent=0 es que encara no ha estat agafat per el RDBMS → Revisar problemes amb el RDBMS

En cas que hagi fallat al motor, revisem els logs:

**logs de la motor**

select \* 
from nt\_lite.nt\_logs\_event\_motor ll
where ll.notificacio\_id = ''
order by ll.dataexecucio desc;

*   Els logs ens haurien de donar més informació de l'error.  
    No obstant, si necessitem una traça més completa, caldrà buscar als logs prtopis de l'aplicació connectant-nos al WL12 via SSH. Rutes i info → [eNOTUM-Lite](eNOTUM-Lite_36341310.html)

  

**Resolució:**

Una vegada hem resolt el problema...

Preguntar a ST si podem reiniciar els processos!

Document generated by Confluence on 02 June 2025 11:08

[Atlassian](http://www.atlassian.com/)