Suport Tècnic : Càrrega de Certificats al TrustedX.  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [01 - Gestió Operativa](26313391.md)
4.  [Tasques complementàries](26313409.md)

Suport Tècnic : Càrrega de Certificats al TrustedX.
===================================================

Created by Unknown User (otecjriquelme), last modified by OTEC ST Robert Font Rubí on 23 April 2025

El procés de càrrega de certificats al TrustedX està automatitzat i només requereix de intervenció per part nostra en uns punts molt concrets.

Tot i això, deixem també documentada la realització manual del procés.

Aquesta tasca es realitza el **dimecres a partir de les 14:30**

A continuació s'explica el procés de càrrega pas a pas, tant en la versió automatitzada com en la versió manual.

  

Procés manual

Pas 0 (no cal realitzar cap acció, just INFO): Com veure els certificats carregats al trustedX
----------------------------------------------------------------------------------------------

Per configurar la base de dades i consultar les dades podem veure la FAQ: [TrustedX - Revisió de certificats](26313660.md)

  

Pas 1: Comprovem els certificats que hi ha per carregar.
--------------------------------------------------------

Podem veure els certificats que cal carregar en  la vista de ZenDesk: Càrrega de certificats Cedits:

![](attachments/26318797/81856057.png)

En aquesta vista tindrem tant els certificats a carregar pel TrustedX com els certificats a carregar per l'AEAT. Podem diferenciar-los pel títol de cada tiquet.

TrustedX: Càrrega de segell cedit per als serveis de l'AOC.

AEAT: Renovació certificat per Via Oberta AEAT

En aquesta FAQ expliquem com carregar els del TrustedX.

Per carregar cada certificat necessitem les següents dades:

*   INE10 de l'entitat.
*   Arxiu P12 del certificat cedit.
*   Password del certificat.
*   Número de ZenDesk lligat a la cessió del certificat.

Pas 2: Crear les carpetes del Desplegament
------------------------------------------

Per començar, prepararem l'entorn de desplegament. Haurem de **crear les carpetes del desplegament on deixarem els certificats i el fitxer .txt** que servirà com a input de l'script de càrrega.

Aquests arxius els posarem a la ruta: _**\\\\192.168.166.33\\Desplegaments\\****any\\mes\\data del desplegament.**_ Exemple: _\\\\192.168.166.33\\Desplegaments\\2018\\10 - Octubre\\24102018_

A la ruta que hem creat o a la que hem accedit, crearem una carpeta amb el nom **PRO-AS@TRUSTEDX.**

Dins d'aquesta carpeta és on copiarem els fitxer .p12 i també on posarem el fitxer .txt per l'script.

A continuació expliquem com aconseguir els P12 i com generar el script de càrrega.

  

Pas 3: Moure els fitxers .p12 cap a la ruta del desplegament
------------------------------------------------------------

Podrem trobar els certificats .p12 a qualsevol de les següents rutes, típicament estarà a la primera: 

*   (Sharepoint) Tecnologia - SUPORT\_TECNIC\\CERTIFICATS\\CERTIFICATS\_CEDITS
*   \\\\192.168.166.33\\Operacions\\Seguiment\\Certificats\\Certificats\_Cedits

La manera més fàcil de localitzar-los és **cercar per l'INE10 de l'entitat que el cedeix**.

El certificat sol tenir com a nom el número de sèrie i sol estar ficat dins una carpeta amb INE10 de l'entitat com a nom. No obstant, pot ser que a vegades no sigui així.

Caldrà **moure el certificat a la carpeta de desplegament** i **canviar-li el nom**. El nom que l'hi posarem serà: _INE10_._p12_.

Veiem-ho:

Cerquem l'INE10 i trobem una carpeta que hauria de contenir el certificat p12:

![](attachments/26318797/61931647.png)

  

Movem l'arxiu a l'entorn de desplegament i el re-nombrem amb l'INE10:

![](attachments/26318797/81856058.png)

  

  

  

  

Cal copiar a l'entorn de desplegament i re-nombrar tots els certificats que han de carregar-se.

Pas 4: Cercar el password de cada certificat i crear l'Script de càrrega.
-------------------------------------------------------------------------

A continuació, **n****ecessitem aconseguir el password de cada un dels certificats**. Aquest password el podem treure del Keepass, cercant pel número de sèrie del certificat: 

(Sharepoint) Tecnologia - SUPORT\_TECNIC\\CERTIFICATS\\CERTIFICATS\_CEDITS\\ESTADIS\_CERTIFICATSCEDITS\_25052018.kdbx  
Password del Keepass: AOCadminpass

  

Una vegada tenim els passwords, i amb la informació que tenim fins ara, ja podem generar el fitxer .txt que servirà com a input per l'script de càrrega dels certificats.

Haurem de generar un fitxer .txt que contingui una línia per cada certificat que volem carregar, seguint l'estructura:

O=INE10,INE10.p12,pwd,numTiquetZD

Exemple:

**Input**

O=1715180001,riumors.p12,E4D801,26120,ENOTUM
O=1722530008,vilamacolum.p12,3D3DFE,26121,ENOTUM
O=2500240003,ager.p12,94E535,26123,ENOTUM
O=1718510007,santjoan.p12,D00738,26179,ENOTUM

El nom del fitxer serà del tipus: _DataServei.txt_ Exemple: 20181024TrustedX.txt

Pas 5: Executar l'script
------------------------

Per executar l'script podem consultar la FAQ [TrustedX - Executar l'script de càrrega](26313647.md)

Pas 5.5: Carregar certificats de l'AEAT
---------------------------------------

FAQ de carregar certificats a l'AEAT [VO - AEAT - Càrrega setmanal de certificats](26313467.md)

Pas 6: Respondre els tiquets ZD i enregistrar la tasca al JIRA
--------------------------------------------------------------

Cada renovació ha de tenir un tiquet propi a la plataforma **ZenDesk**.

Haurem de moure tots els tiquets associats als certificats que haguem carregat.

Per fer-ho, utilitzarem la MACRO: Escalat >> Certificat Carregat:

![](attachments/26318797/81856060.png)

Finalment imputem aquesta tasca, JIRA's mensuals.

Procés automatitzat

Pas 0 (no cal realitzar cap acció, just INFO): Com veure els certificats carregats al trustedX
----------------------------------------------------------------------------------------------

Per configurar la base de dades i consultar les dades podem veure la FAQ: [TrustedX - Revisió de certificats](26313660.md)

  

Pas 1: Comprovem els certificats que hi ha per carregar.
--------------------------------------------------------

Podem veure els certificats que cal carregar en  la vista de ZenDesk: Càrrega de certificats Cedits:

![](attachments/26318797/81856057.png)

En aquesta vista tindrem tant els certificats a carregar pel TrustedX com els certificats a carregar per l'AEAT. Podem diferenciar-los pel títol de cada tiquet.

TrustedX: Càrrega de segell cedit per als serveis de l'AOC.

AEAT: Renovació certificat per Via Oberta AEAT

En aquesta FAQ expliquem com carregar els del TrustedX.

Per carregar cada certificat necessitem les següents dades:

*   INE10 de l'entitat.
*   Arxiu P12 del certificat cedit.
*   Password del certificat.
*   Número de ZenDesk lligat a la cessió del certificat.

Pas 2: Executar l'Script de preparació de càrrega de certificats
----------------------------------------------------------------

Executem l'Script, per fer-ho l'hem de tenir configurat en qualsevol IDE, per exemple IntelliJ

  

Aquest Script realitzarà les següents accions:

1.  Cercarà els certificats a carregar a les carpetes de xarxa:
    1.  (Sharepoint) Tecnologia - SUPORT\_TECNIC\\CERTIFICATS\\CERTIFICATS\_CEDITS
2.  Cercarà les contrasenyes al Keepass:
    1.  (Sharepoint) Tecnologia - SUPORT\_TECNIC\\CERTIFICATS\\CERTIFICATS\_CEDITS\\ESTADIS\_CERTIFICATSCEDITS\_25052018.kdbx
3.  Generarà la ruta de xarxa corresponent al desplegament dels certificats:
    1.  Exemple: _\\\\192.168.166.33\\Desplegaments\\2018\\10 - Octubre\\24102018\\PRO-AS@TRUSTEDX  
          
        _
        
        Com trobar l'adreça on es troben els certificats
        
        La millora actualment ja ens informa la ruta, només cal esborrar una de les barres que apareix entre la IP i desplegaments.  
          
        ![](attachments/26318797/128647481.png)  
          
        Exemple: \\\\192.168.166.135\\Desplegaments\\2025\\04 - Abril\\23042025\\PRO - AS@SSC
        
4.  Copiarà els certificats a la ruta de xarxa generada.
5.  Generarà el fitxer .txt que servirà d'input per l'script de càrrega dels certificats.

En resum, deixarà l'entorn de desplegament preparat perquè realitzem la càrrega. Després d'executar-lo, si anem a la ruta de xarxa creada, hauríem de veure una cosa així:

![](attachments/26318797/61931681.png)

  

A més, ens enviarà un parell de correus a mode de report.

  

Pas 3: Executar Script de càrrega per cada entorn.
--------------------------------------------------

Per executar l'script podem consultar la FAQ [TrustedX - Executar l'script de càrrega](26313647.md)  
  

Pas 4: Carregar certificats de l'AEAT
-------------------------------------

FAQ de carregar certificats a l'AEAT [VO - AEAT - Càrrega setmanal de certificats](26313467.md)

Pas 5: Respondre els tiquets ZD i enregistrar la tasca al JIRA
--------------------------------------------------------------

Cada renovació ha de tenir un tiquet propi a la plataforma **ZenDesk**.

Haurem de moure tots els tiquets associats als certificats que haguem carregat.

Per fer-ho, utilitzarem la MACRO: Escalat >> Certificat Carregat:

![](attachments/26318797/81856060.png)

Finalment imputem aquesta tasca, JIRA's mensuals.

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2019-8-21\_9-10-24.png](attachments/26318797/26318798.png) (image/png)  
![](images/icons/bullet_blue.gif) [CarregaCertificats.xlsx](attachments/26318797/26318799.xlsx) (application/vnd.openxmlformats-officedocument.spreadsheetml.sheet)  
![](images/icons/bullet_blue.gif) [image2019-8-21\_9-19-37.png](attachments/26318797/26318800.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-1-30\_14-4-14.png](attachments/26318797/26318801.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-1-30\_14-12-35.png](attachments/26318797/26318802.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-11-9\_14-18-14.png](attachments/26318797/26318803.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-4-10\_16-9-11.png](attachments/26318797/26318809.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-16\_14-51-12.png](attachments/26318797/61931644.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-16\_14-51-16.png](attachments/26318797/61931645.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-16\_14-59-39.png](attachments/26318797/61931647.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-16\_14-59-53.png](attachments/26318797/61931648.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-16\_15-4-48.png](attachments/26318797/61931651.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-16\_15-7-42.png](attachments/26318797/61931652.png) (image/png)  
![](images/icons/bullet_blue.gif) [carrega-certificats.jar](attachments/26318797/81856061.jar) (application/octet-stream)  
![](images/icons/bullet_blue.gif) [image2021-9-17\_13-25-59.png](attachments/26318797/61931680.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-17\_13-31-28.png](attachments/26318797/61931681.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-17\_13-36-37.png](attachments/26318797/61931682.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-17\_13-40-41.png](attachments/26318797/61931683.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-17\_13-45-25.png](attachments/26318797/61931684.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-4-11\_13-22-32.png](attachments/26318797/81856057.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-4-11\_13-34-49.png](attachments/26318797/81856058.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-4-11\_14-0-22.png](attachments/26318797/81856060.png) (image/png)  
![](images/icons/bullet_blue.gif) [carrega-certificats.jar](attachments/26318797/61931679.jar) (application/java-archive)  
![](images/icons/bullet_blue.gif) [image2025-4-23\_13-13-47.png](attachments/26318797/128647481.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:47

[Atlassian](http://www.atlassian.com/)