Suport Tècnic : PCI2 - FRONT - TOMCAT6 - Desplegament  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.md)
4.  [Plataformes](Plataformes_41520520.md)
5.  [PCI2 - FRONT - TOMCAT6](PCI2---FRONT---TOMCAT6_41520867.md)

Suport Tècnic : PCI2 - FRONT - TOMCAT6 - Desplegament
=====================================================

Created by Unknown User (otecobernal), last modified by David Tejada Admin on 10 June 2021

1\. Backup
----------

Els paquets a desplegar els trobarem a la ruta: **_\\\\192.168.166.33\\Desplegaments\\2019\\Pendents_**. Agafem els paquets que toca desplegar i els copiem en la ruta: **_\\\\192.168.166.33\\Desplegaments\\2019\\10 - Octubre\\24102019_**.

Tant la carpeta del mes, com la carpeta del dia poden variar. Normalment l'haurem de crear nosaltres.

Un cop copiat hem de realitzar el _backup_.

Ens dirigim a les màquina PCI2 - WEB.

**PRO**

*   10.120.1.14 → aoc-l-web1  
    
*   10.120.1.15 → aoc-l-web2
*   10.120.1.137 → aoc-l-web3  
    
*   10.120.1.203 → aoc-l-web4  
    

**PRE**

*   10.120.2.85 → aoc-l-web1-pre  
    
*   10.120.2.86 → aoc-l-web2-pre

A la ruta: **/apps/aoc/webapps/tomcat6/** trobarem els paquets desplegats actualment, agafarem el que necessitem per fer el backup.

![](attachments/41520869/41522336.png)

2\. Copiar paquet i desplegar
-----------------------------

Una vegada fet el _backup,_ haurem de copiar el paquet a la màquina. Anirem a la ruta **/apps/aoc/webapps/tomcat6/** i el copiarem.

Un cop hem copiat tots el paquets, executarem el script que es troba a la ruta **_/apps/aoc/scripts/desplegar.sh_**

Obrim un terminal per executar el script desplegar.sh

  

cd /apps/aoc/scripts/
./desplegar.sh

o bé:

  

/apps/aoc/scripts/desplegar.sh

L'script **atura** el tomcat i **elimina** els fitxers temporals **work** i **temp**, tot seguit apareix un menú amb els diferents paquets a desplegar. Hem d'escriure el número que calgui i prémer enter, d'aquesta manera haurem esborrat el que hi ha desplegat i copiat el que hem posat nosaltres.

Si s’indica un que no toca, no passaria res, ja que es desplegaria l'últim paquet pujat.

Si hi ha, revisar nota tècnica, moltes vegades cal realitzar modificacions d'altres fitxers i la màquina ha d'estar apagada.

Per últim premem el "0" per reiniciar el tomcat.

Si dóna la casualitat que tenim més d'un paquet a desplegar, podem prémer tots els números necessaris abans de prémer el 0, **sempre d'un en un**.

Una vegada hem premut el 0 s'executarà la comanda d'iniciar el tomcat i mostrarà els logs del catalina.

EXEMPLE REAL una vegada executat el script:

![](attachments/41520869/41522337.png)

3\. Validacions internes
------------------------

Hi han dues maneres diferents de realitzar les validacions:

*   A nivell de fitxers → Revisar que tots els fitxers i carpetes s'han modificat correctament
*   Validació JIRA → Realitzar validació que indiquen al JIRA →  Normalment s'encarrega l'OT

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2019-11-25\_11-27-38.png](attachments/41520869/41522336.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-2-13\_11-35-31.png](attachments/41520869/41522337.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:16

[Atlassian](http://www.atlassian.com/)