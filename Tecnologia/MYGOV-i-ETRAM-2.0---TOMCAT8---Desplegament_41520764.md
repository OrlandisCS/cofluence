Suport Tècnic : MYGOV i ETRAM 2.0 - TOMCAT8 - Desplegament  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [04 - Tècnica de sistemes + 24x7 + Padró](26313202.html)
4.  [Plataformes](Plataformes_41520520.html)
5.  [MYGOV i ETRAM 2.0 - TOMCAT8](MYGOV-i-ETRAM-2.0---TOMCAT8_41520762.html)

Suport Tècnic : MYGOV i ETRAM 2.0 - TOMCAT8 - Desplegament
==========================================================

Created by Unknown User (otecobernal), last modified by Joan Riquelme on 14 May 2025

Servidors 
==========

*   Node1: **aoc-l-mygov-01 → 10.120.1.37**
    
*   Node2: **aoc-l-mygov-02 → 10.120.1.38**
*   User: **tomcat8**

*   Node1: **aoc-l-mygov-01-pre → 10.120.2.138**
    
*   Node2: **aoc-l-mygov-02-pre→ 10.120.2.139**
*   User: **tomcat8**

Per aquest desplegament normalment es despleguen dos paquets: tramits.war i mygov.war. Ens podem trobar que alguna vegada només sigui un paquet, el procediment és pràcticament el mateix.

Pas 0: Fem backup
-----------------

Descarreguem el WAR de la ruta /home/tomcat8/wars i el guardem en una carpeta de backup. En xarxa a la ruta: \\\\192.168.166.33\\Desplegaments\\2022\\....

Pas 1: Copiar el paquet i desplegar
-----------------------------------

Una vegada fet el backup copiem el paquets a desplegar a la ruta /home/tomcat8/wars

Un cop s'han copiat els paquets, començarem amb el desplegament. Aquesta màquina no té cap script. Ho farem a mà.

#Aturem el servei
sudo systemctl stop tomcat8

#Verifiquem que el servei està aturat
ps -uxa | grep -i tomcat
  
#Eliminem temporals
rm -rf /apps/tomcat8/temp/\*
rm -rf /apps/tomcat8/work/\*

#Esborrem el paquet en qüestió - Tenir cura per si només es desplega un dels dos paquets
rm -rf /apps/versions/apache-tomcat-8.5.11/webapps/tramits\*
rm -rf /apps/versions/apache-tomcat-8.5.11/webapps/mygov\*

#Un cop hem esborrat els paquets, podem revisar si s'han esborrat correctament a la ruta /apps/versions/apache-tomcat-8.5.11/webapps/

#Copiem el nou war - Tenir cura per si només es desplega un dels dos paquets
cp /home/tomcat8/wars/tramits.war /apps/versions/apache-tomcat-8.5.11/webapps/
cp  /home/tomcat8/wars/mygov.war /apps/versions/apache-tomcat-8.5.11/webapps/

#Aixequem el servei
sudo systemctl start tomcat8 && tail -f /apps/tomcat8/logs/catalina.out

Validacions internes.
---------------------

Hi han dues maneres diferents de realitzar les validacions:

*   A nivell de fitxers → Revisar que tots els fitxers i carpetes s'han modificat correctament
*   Validació JIRA → Realitzar validació que indiquen al JIRA →  Normalment s'encarrega l'OT

Document generated by Confluence on 02 June 2025 11:16

[Atlassian](http://www.atlassian.com/)