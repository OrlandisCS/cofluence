Suport Tècnic : e-VALISA – FLUX DEL SERVEI – ERROR - No es pot esborrar una valisa  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's eVALISA](28705569.md)

Suport Tècnic : e-VALISA – FLUX DEL SERVEI – ERROR - No es pot esborrar una valisa
==================================================================================

Created by Unknown User (cmoralea), last modified by Unknown User (oteccmorales) on 22 October 2019

Problema
--------

Quan ens obren un tiquet indicant que tenen una valisa i no la poden esborrar, és pel fet que segurament la valisa es va quedar a mitges d'un enviament.

Solució
-------

Haurem d'eliminar el registre d'aquesta valisa en VALISAMESTRE i de totes les taules que pengi.

  

Les passes a seguir:  
  

\-- 1) Cerquem a VALISAUSER l'usuari afectat
select \* from lportal.valisauser a
where a.nif = '37731307Z';

--Ens podem impersonar? Si surt en la següent consulta, podem, si no, no es pot fer impersonalització.

select \* from usu\_usuari a
where a.identificador = '37731307Z';

--2) Anem a VALISAMESTRE, cerquem registre afectat i intentem esborrar, s'ha d'anar esborrant per pk
select \* from lportal.valisamestre a
where a.assumpte like '%Dictamen%'
and a.safata <> 'SENT\_BOX'; -- en aquest cas està en safata "Esborrany"

-- la VALISAMESTREID es : 1007667

select \* from lportal.valisamestre a
where a.valisamestreid = 1007667;

 
delete from valisamestre where valisamestreid='1007667';

select \* from lportal.valisaactors a
where a.valisamestreid = '1007667'; -- No hi ha dades

select \* from lportal.valisacomentaris c
where c.valisamestreid = '1007667';-- No hi ha dades

select \* from lportal.valisadocument d
where d.valisamestreid = '1007667';-- No hi ha dades

select \* from lportal.valisaenviadesmail m
where m.valisaid = 1007667;-- Tenim un registre

delete from lportal.valisaenviadesmail m
where m.valisaid = 1007667;

select \* from lportal.valisascheduler sc
where sc.valisamestreid = '1007667';-- No hi ha dades
 
 
select \* from lportal.valisasignatura s
where s.idvalisa = '1007667';-- Tenim 2 registres

delete from lportal.valisasignatura s
where s.idvalisa = '1007667';

Tanquem el tiquet indicant que hem esborrat la Valisa indicada.

  

Related articles
----------------

  

Document generated by Confluence on 02 June 2025 10:54

[Atlassian](http://www.atlassian.com/)