Suport Tècnic : MUX - FLUX DEL SERVEI - ERRORS - Salts de registres en l'aj. Barcelona - Extracció assentaments - Error "OR"  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's MUX](28705591.md)

Suport Tècnic : MUX - FLUX DEL SERVEI - ERRORS - Salts de registres en l'aj. Barcelona - Extracció assentaments - Error "OR"
============================================================================================================================

Created by Unknown User (otecrjurado), last modified by Unknown User (oteccmorales) on 22 September 2020

Aquest tipus d'error normalment ve per Footprints.

L'entitat ens obrirà un tiquet indicant que han detectat que hi ha salts en els registres, normalment en els tràmits d'OVER.

![](attachments/30867838/41519146.png)

Els salts de registre es generen a causa que el primer registre falla i es queda en estat OR i posteriorment es crea un altre registre pel mateix tràmit. Tal com podem veure a la imatge.

Normalment l'ajuntament de Barcelona quan detecten aquests salts de registres ens demanen una extracció dels assentaments en un rang de temps determinat. A més en l'extracció no només hem de tindre en compte els assentaments de Barcelona si no que també els assentaments dels ajuntaments que depenen del registre de Barcelona, com per exemple el l'IMH.

Per realitzar aquesta extracció executarem la següent query:

**Extracció assentaments**

SELECT DG.ID,
       SUBSTR(TRANSACTION\_ID,
              INSTR(TRANSACTION\_ID, '-', 1, 2) + 1,
              INSTR(TRANSACTION\_ID, '-', 1, 3) -
              INSTR(TRANSACTION\_ID, '-', 1, 2) - 1) TRAMIT\_ID,
       DG.APLICACIO,
       DG.TRACE\_DATE,
       DG.PROCEDENCIA,
       DG.DESTINACIO,
       DG.ASSUMPTE,
       DG.REG\_PRINCIPAL,
       DG.REG\_AUXILIAR,
       DG.ESTAT,
       DG.NUM\_ASSENTAMENT,
       ASSENTAMENT\_ENTRADA,
       DG.TEMPS\_TOTAL
  FROM AOC\_MUX\_AUDIT\_DADES\_GENERALS DG
 WHERE DG.TRACE\_DATE >= TO\_DATE('12/11/2019 00:00', 'dd/mm/YYYY HH24:MI') -- Introduir rang de temps indicat per Barcelona
   AND DG.TRACE\_DATE <= TO\_DATE('18/11/2019 23:59', 'dd/mm/YYYY HH24:MI') -- Introduir rang de temps indicat per Barcelona
   AND SUBSTR(TRANSACTION\_ID,
              INSTR(TRANSACTION\_ID, '-', 1, 2) + 1,
              INSTR(TRANSACTION\_ID, '-', 1, 3) -
              INSTR(TRANSACTION\_ID, '-', 1, 2) - 1) in
       (SELECT SUBSTR(TRANSACTION\_ID,
                      INSTR(TRANSACTION\_ID, '-', 1, 2) + 1,
                      INSTR(TRANSACTION\_ID, '-', 1, 3) -
                      INSTR(TRANSACTION\_ID, '-', 1, 2) - 1)
          FROM AOC\_MUX\_AUDIT\_DADES\_GENERALS DG
         WHERE DG.ESTAT = 'OR'
           AND DG.TRACE\_DATE >=
               TO\_DATE('12/11/2019 00:00', 'dd/mm/YYYY HH24:MI') -- Introduir rang de temps indicat per Barcelona
           AND DG.TRACE\_DATE <=
               TO\_DATE('18/11/2019 23:59', 'dd/mm/YYYY HH24:MI') -- Introduir rang de temps indicat per Barcelona
           AND DG.NUM\_ASSENTAMENT like '0801930008%') -- Tots els assentaments de les entitats dependents del registre de Barcelona comencen amb el ine10 de Aj. Barcelona
 ORDER BY DG.TRACE\_DATE DESC;

  

  

Tiquet d'exemple: FP#313243/313992

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2020-9-22\_16-21-55.png](attachments/30867838/41519146.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:56

[Atlassian](http://www.atlassian.com/)