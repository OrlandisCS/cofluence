Suport Tècnic : e-VALISA – FLUX DEL SERVEI – Logs - error Cannot get a connection, pool error Timeout waiting for idle object  

1.  [Suport Tècnic](index.html)
2.  [Suport Tècnic](13893782.html)
3.  [02 - FAQ's serveis](26313393.html)
4.  [FAQ's eVALISA](28705569.html)

Suport Tècnic : e-VALISA – FLUX DEL SERVEI – Logs - error Cannot get a connection, pool error Timeout waiting for idle object
=============================================================================================================================

Created by Unknown User (cmoralea), last modified by Unknown User (oteccmorales) on 22 October 2019

Plana on indiquem on hem de revisar els logs de Valisa

Step-by-step guide
------------------

Si apareix aquest missatge: Cannot get a connection, pool error Timeout waiting for idle object

Revisar els logs de /apps/tomcat/logs/valisa.log dels nodes liferay6 (10.120.1.229 i 10.120.1.230)

     at java.lang.Thread.run(Thread.java:745)

Caused by: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object

        at org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:114)

        at org.apache.tomcat.dbcp.dbcp.BasicDataSource.getConnection(BasicDataSource.java:1044)

        at net.opentrends.caoc.portlet.valisa.service.persistence.ValisaUserPersistenceImpl.updateImpl(ValisaUserPersistenceImpl.java:2206)

        ... 201 more

Caused by: java.util.NoSuchElementException: Timeout waiting for idle object

        at org.apache.tomcat.dbcp.pool.impl.GenericObjectPool.borrowObject(GenericObjectPool.java:1171)

        at org.apache.tomcat.dbcp.dbcp.PoolingDataSource.getConnection(PoolingDataSource.java:106)

        ... 203 more

05/12/2016 15:04:33 \[ERROR\] ValisaPortlet - \[doView - fatalErrorFromProcessAction\] Error: <h1 style="color: red">AtenciÃ³, s'ha produÃ¯t un error</h1>S'ha produit un error generic durant la cÃ rrega de la pÃ gina

05/12/2016 15:04:35 \[ERROR\] ValisaPortlet - \[render\] Error: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object

com.liferay.portal.kernel.exception.SystemException: org.apache.tomcat.dbcp.dbcp.SQLNestedException: Cannot get a connection, pool error Timeout waiting for idle object

        at com.liferay.portal.service.persistence.impl.BasePersistenceImpl.processException(BasePersistenceImpl.java:251)

        at net.opentrends.caoc.portlet.valisa.service.persistence.ValisaUserPersistenceImpl.updateImpl(ValisaUserPersistenceImpl.java:2219)

        at net.opentrends.caoc.portlet.valisa.service.persistence.ValisaUserPersistenceImpl.updateImpl(ValisaUserPersistenceImpl.java:1)

        at com.liferay.portal.service.persistence.impl.BasePersistenceImpl.update(BasePersistenceImpl.java:333)

        at sun.reflect.GeneratedMethodAccessor1177.invoke(Unknown Source)

        at sun.reflect.DelegatingMethodAccessorImpl.invoke(DelegatingMethodAccessorImpl.java:43)

  

  

És que el portlet en aquest node no pot donar servei perquè ha perdut la connexió del pool.

L'única manera de solucionar-ho és reiniciar el portlet en  qüestió.

  

touch /apps/tomcat/webapps/valisa2014-portlet/WEB-INF/web.xml && tail -f /apps/tomcat/logs/valisa.log

i revisar que el torna a carregar bé:

Normalment, quan apareix aquest missatge és que ha carregat correctament:

  

05/12/2016 15:09:53 \[WARN \] ValisaContext - FRANSAES: Unitats Menors refrescades amb Ã¨xit.

Related articles
----------------

  

Document generated by Confluence on 02 June 2025 10:55

[Atlassian](http://www.atlassian.com/)