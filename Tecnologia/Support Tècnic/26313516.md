Suport Tècnic : OVER - ALTRES - PICA0000: Modalitat d'OVER només per a PICA  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's OVER](28705589.md)

Suport Tècnic : OVER - ALTRES - PICA0000: Modalitat d'OVER només per a PICA
===========================================================================

Created by Unknown User (jriqueca), last modified by OTEC ST Robert Font Rubí on 26 June 2023

PICA0000

La PICA anomena a aquesta mena de tràmits: **Integració canals** o **Inici expedients**

  

Descripció de la modalitat
==========================

Aquesta modalitat de consum, anomenada PICA0000, és utilitzada quan l'ens vol tramitar amb OVER però **ha aconseguit el PDF que vol enviar per una via que no és EACAT**. No ha realitzat un OVER\_FORMULARI ni tampoc han polsat el botó de descarregar d'EACAT.

En aquesta situació, la PICA es trobava amb un problema: **NO PODIA tramitar normalment,** ja que **no tenien ni un codi instància servei ni un codi instància tràmit**. Aquests dos codis són necessaris per a tramitar amb OVER\_TRAMITACIO.

Davant d'aquest problema, la PICA fa un consum PICA0000. El PICA0000 és d'alguna manera una modalitat que serveix per traduir des del llenguatge PICA al llenguatge AOC.

  

Funcionament del PICA0000
-------------------------

L'objectiu d'aquesta modalitat és que la PICA pugui tramitar un PDF sense tenir un Codi Instància Tràmit ni un Codi Instància Servei. Per aconseguir-ho, es fa el següent:

1.  La PICA realitza un consum de PICA0000, on **adjuntarà el PDF que vol tramitar** i que han obtingut per altres llocs que no són EACAT.
2.  Inici de la tramitació via PICA0000:
    1.  **Com a resposta a la petició, se'ls retorna un Codi Instància Tràmit i un Codi Instància servei**, que quedaran enllaçats al PDF que la PICA ha aportat en el primer pas.
    2.  Per darrere, **Comença el flux normal d'OVER,** és a dir: Es descarrega el PDF que la PICA ha aportat (ja amb els dos codis enllaçats) i es tramita. És doncs com si la PICA fes un OVER\_FORMULARI i un OVER\_TRAMITACIO amb un sol consum a la modalitat PICA0000.
3.  Una vegada s'ha realitzat el consum correctament, els usuaris ja podran _jugar_  amb aquest tràmit. Podran respondre, etc; ja que tindrà els dos codis (instància tràmit i instància servei). El tràmit haurà quedat integrat en el món OVER, encara que el PDF no hagi nascut allà.

Una vegada realitzat el tràmit, l'usuari podrà anar a EACAT - Els meus tràmits i allà veurà una línia amb els tràmits que s'han realitzat.

  

Validacions a dur a terme quan entra una petició.
-------------------------------------------------

### Passar el XSD sobre la petició

Cal passar el XSD eliminant l'element <CrearApuntPeticio>. Fitxer XSD: [xsd.7z](attachments/26313516/26314393.7z)

### Validar que estem rebent el nostre XML

A vegades la PICA ens envia XML's propis seus. El primer que hauríem de fer és validar que l'XML que ens passen és nostre, així com l'error que se'ns retorna.

L'XML que ens han de facilitar tindrà aquest tag a l'inici (crear apunt petició):

![](attachments/26313516/26317122.png)

### Validar que la petició  tingui la Tripleta PICA

Haurem de validar que la petició XML que ens passen tingui el que anomenem la Tripleta PICA:

*   IdTramit
*   IdModalitat
*   VersioNegoci

Aquests valors són del seu catàleg de tràmits. Haurem de comprovar per Base de Dades que aquests tres elements estan ben informats. A continuació veiem un exemple:

Exemple 1: Validar la tripleta PICA

En la primera imatge veiem el que anomenem Tripleta PICA a l'XML. 

![](attachments/26313516/26317142.png)

  

  

I en la següent imatge veiem la comprovació que fem per Base de Dades. En aquest cas la Versió Negoci estava mal informada en l'XML:

  

select \* from over2.over\_pica\_cataleg  a
where a.pica\_codi\_tramit = 'CLT043';

--també pots mirar la modalitat per comprovar si el tramit està ben informat amb:
where a.pica\_codi\_modalitat = 'INTE';

  

![](attachments/26313516/26317137.png)

En cas que comprovem que la tripleta esta mal montada els hi respondrem:

Missatge Tipus

Benvolgut,

hem revisat el vostra cas i hem observat que les dades son incorrectes, en concret:

_Aquí informarem a on s'ha produït l'error. Per exemple:_

El codi del tramit no es TRNI01 sino TRNI001. (No confondre amb el codi funcional)

_![](attachments/26313516/61931565.png)_

Salutacions.

### Identificador de destí ha d'estar a usu\_ens

Per altra banda, hem de comprovar que el CIF informat en l'element IdentificadorDesti estigui a la taula usu\_ens

![](attachments/26313516/36339726.png)

Ho fem amb la següent consulta:

**CIF a la taula usu\_ens**

select \* from usu\_ens a
where a.uen\_cif = '???????';

En cas de no trobar amb el CIF

Bon dia,

  
Traslladarem a OT. Informem que l'ens XXXXXX amb el CIF XXXXX no apareix a la BBDD i entenem que s'ha d'afegir perquè puguin realitzar la petició.  
Esperem la vostra resposta per saber quan o com podríem desencallar aquest problema.  
  
Salutacions.

### Comprovar que els fitxers adjunts siguin al FTP de la PICA

A la petició XML cal que informin la ruta on estan els adjunts, que seran al FTP de la PICA.

Haurem de comprovar que realment estan en aquella ruta.

  

Notes importants
----------------

Els errors que es retornen no vénen especificats en la resposta. El millor si no sabem el que falla és fer SoapUI i revisar els logs.

Projecte SoapUI (important llençar les proves a **PRE,** ): [GLOBAL - ALTRES - SOAP-Ui](GLOBAL---ALTRES---SOAP-Ui_41523727.md) en la finestra configurar projecte.

![](attachments/26313516/93356555.png)

  

  

On mirar els logs? → **SOA** al fitxer **OVER\_TRAMITS\_PICA\_APPNODO?\_SOA.log**

\[PRO\]\[soa@aoc-l-soa01-pro logs\]$ pwd
/apps/aoc/APP/logs
\[PRO\]\[soa@aoc-l-soa01-pro logs\]$ ls -lhart \*PICA\*

ERRORS COMUNS

En cas de que l'error sigui **Ens tramitador XXXXXXX inactiu o no adherit,** podem anar a la següent FAQ, per comprovar si efectivament l'entitat està habilitada o no:

  

[OVER - INTEGRACIÓ - ERROR - Ens tramitador XXXXXXX inactiu o no adherit](41522774.md)

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2019-4-18\_17-5-6.png](attachments/26313516/26317142.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-4-18\_17-7-10.png](attachments/26313516/26317137.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-4-18\_17-9-4.png](attachments/26313516/26317140.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2019-4-18\_17-25-30.png](attachments/26313516/26317122.png) (image/png)  
![](images/icons/bullet_blue.gif) [PICA0000-soapui-project.xml](attachments/26313516/26316321.xml) (text/xml)  
![](images/icons/bullet_blue.gif) [xsd.7z](attachments/26313516/26314393.7z) (application/octet-stream)  
![](images/icons/bullet_blue.gif) [image2020-3-2\_13-30-21.png](attachments/26313516/36339726.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-7\_14-39-19.png](attachments/26313516/61931564.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2021-9-7\_14-39-54.png](attachments/26313516/61931565.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2023-6-26\_14-1-11.png](attachments/26313516/93356555.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:57

[Atlassian](http://www.atlassian.com/)