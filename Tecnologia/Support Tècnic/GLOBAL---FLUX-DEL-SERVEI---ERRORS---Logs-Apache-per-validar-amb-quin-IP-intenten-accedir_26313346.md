Suport Tècnic : GLOBAL - FLUX DEL SERVEI - ERRORS - Logs Apache per validar amb quin IP intenten accedir  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's Global](28705585.md)

Suport Tècnic : GLOBAL - FLUX DEL SERVEI - ERRORS - Logs Apache per validar amb quin IP intenten accedir
========================================================================================================

Created by Unknown User (agonlara), last modified by Cristian Morales on 02 June 2023

En aquesta FAQ es documenta com poder cercar els logs  de l'Apache (Frontals). Aquests logs no són molt comuns per cercar errors, però ens anirà bé per detectar peticions que no arriben al SIRI i fallen per algunes qüestions dels frontals. 

Si van per PROXY no podem validar això, ja que el PROXY s'encarrega de la connexió SSL, handshake...

  

Missatge a traslladar a l'usuari per validar:

Benvolguts,

Creiem que el problema està en el fet que no està autoritzada vostra ip.

Per a estar segurs, podeu fer la següent prova des del vostre servidor amb el qual esteu intentant accedint/fent petició:

wget [https://serveis3-pre.iop.aoc.cat/siri-proxy/services/Sincron2](https://serveis-pre.iop.aoc.cat/siri-proxy/services/Sincron2) <-----PRE

wget [https://serveis3.app.aoc.cat/siri-proxy/services/Sincron2](https://serveis.app.aoc.cat/siri-proxy/services/Sincron2) <--------PRO

Així podrem determinar fàcilment en els logs la ip per la qual esteu arribant als nostres serveis.

Indiqueu-nos data i hora en què heu realitzat la prova, ens ajudarà a trobar-la a les traces.

Gràcies.

  

Màquina a la qual accedeixen (és a dir si són consums de IOP o APP ha de ser el back on es configuren les IPs) - [GLOBAL - INTEGRACIÓ - Configuració d'IP's](26313331.md)

  

Realitzem la comanda httpd -S per veure les rutes de les configuracions dels "virtualHost".

  

![](attachments/26313346/26314820.png)

  

  

1- Podem filtrar per apuntar més fàcilment al node del que volem veure els logs

2- Realitzem un cat de la url de la màquina que volem veure els logs

3- Dins del fitxer de configuració trobem el directori i el nom dels logs

Podem fer control + R i possar -S amb usuari logsdom

Comandament a fer : httpd -S |grep app o iop

![](attachments/26313346/26314761.png)

  

Llavors obtenint aquesta url, només haurem de fer un tail, more... per visualitzar i afegir la data del dia que es van registrar els logs. 

Exemple :  cat /etc/httpd/conf.d/sites/ssl/serveis3-pre.iop.aoc.cat\_ssl.conf

És possible que ens trobem que els logs del mateix dia no estiguin creats això significarà que no hi ha hagut errors durant aquest dia. 

![](attachments/26313346/26314817.png)

  

Executem la comanda i veurem els logs de l'apache del node en qüestió. 

Exemple: veure comanda al moment : tail -f /mnt/lhnfslogpre/aoc-l-front01-pre/apache-logs/serveis3-pre.iop.aoc.cat/serveis3-pre.iop.aoc.cat-ssl-error.20210506.log

Si no fer, un grep....

![](attachments/26313346/26314818.png)

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2018-12-14\_13-7-48.png](attachments/26313346/26314820.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-12-14\_13-8-2.png](attachments/26313346/26314822.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-12-14\_13-8-15.png](attachments/26313346/26314817.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-12-14\_13-8-29.png](attachments/26313346/26314818.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2018-12-14\_15-38-57.png](attachments/26313346/26314761.png) (image/png)  

Document generated by Confluence on 02 June 2025 10:55

[Atlassian](http://www.atlassian.com/)