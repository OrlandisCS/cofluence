Suport Tècnic : VO - ALTRES - Desmantellament d'un producte o modalitat  

1.  [Suport Tècnic](index.md)
2.  [Suport Tècnic](13893782.md)
3.  [02 - FAQ's serveis](26313393.md)
4.  [FAQ's VO](28705575.md)

Suport Tècnic : VO - ALTRES - Desmantellament d'un producte o modalitat
=======================================================================

Created by Cristian Morales, last modified on 29 April 2025

Per desmantellar un producte o modalitat de Via Oberta caldrà realitzar les següents accions:

*   Undeploy del WAR corresponent a WL12.
*   Desactivació del producte/modalitat a nivell de SIRI.
*   Eliminar el rol a nivell de EACAT TR → sempre i quan només l'utilitzi el servei que estem desmantellant.
*   Eliminar les pantalles d'EACAT - [EACAT - FLUX DEL SERVEI - CONFIGURACIONS - Treure pantalles EACAT al SIRI](EACAT---FLUX-DEL-SERVEI---CONFIGURACIONS---Treure-pantalles-EACAT-al-SIRI_128647296.md)
*   Eliminar la documentació del GitHub.

A continuació detallem cada un dels passos:

  

Undeploy del WAR corresponent a WL12.
-------------------------------------

Les aplicacions de Via Oberta viuen al WL12, per tant caldrà undeployar una aplicació al WL12.

Aquest procediment el tenim documentat a la següent FAQ: [WL12 - Undeploy d'una aplicació amb GRADLE](41519822.md)

Per tant, tan sols caldrà localitzar el WAR que volem desmantellar i seguir la FAQ.

Cal tenir en compte que per seguir la FAQ de undeploy cal tenir les configuracions necessàries per desplegar, que s'indiquen en el pas 2 d'aquesta FAQ: [PCI3 - WL12 - Desplegament](PCI3---WL12---Desplegament_41520944.md)

  

Desactivar el producte/modalitat al SIRI
----------------------------------------

Caldrà posar el producte/modalitat amb el flag _Actiu/Activa_ a 0

Si estem desmantellant tot un producte:

**Desactivar un producte**

update siri.aoc\_pci\_siri\_producte pp
set pp.actiu = 0
where pp.id = ''; -- pk del producte

  

En canvi, si només estem desmantellant una modalitat:

**Desactivar una modalitat**

update siri.aoc\_pci\_siri\_modalitat mm
set mm.activa = 0
where mm.id = ''; -- pk de la modalitat

  

No esborrem cap fila per si haguéssim de recuperar-ho. Tan sols desactivem amb aquest flag.

  

NO SEMPRE: Eliminar el rol a nivell de EACAT TR → sempre i quan només l'utilitzi el servei que estem desmantellant.
-------------------------------------------------------------------------------------------------------------------

##### **Comprovació prèvia:**

Esborrarem el Rol a EACAT TR, sempre i quan el producte o modalitat que estem desmantellant **sigui l'únic que utilitza aquest rol**.

Per tant, per saber si hem de fer aquest pas:

En el cas que estiguem fent el desmantellament d'una modalitat

**Revisem si alguna modalitat més utilitza el rol**

select \*
  from lr6serveis.vo\_cfg cc
 where cc.rol in (select rol
                    from lr6serveis.vo\_cfg cc
                   where cc.codi\_modalitat like '%ATEX%');

En el cas que estiguem fent el desmantellament d'un producte:

**Revisem si algun producte més utilitza el rol**

select \*
  from lr6serveis.vo\_cfg cc
 where cc.rol in (select rol
                    from lr6serveis.vo\_cfg cc
                   where cc.codi\_producte like '%ESTRANGERIA%');

**Si aquesta consulta ens retorna més modalitats/productes dels que estem desmantellant** → Llavors NO farem l'eliminació del Rol i podem passar a la següent passa: Eliminar les pantalles d'EACAT.

**Si aquesta consulta NOMÉS ens retorna les files de les modalitats/productes que estem desmantellant** → Llavors procedim a eliminar el Rol a nivell de EACAT TR, tal i com explico a continuació:

##### Eliminació del Rol a nivell de EACAT TR

Accedim a EACT TR:

PRE: [http://preproduccio.eacat.cat](http://preproduccio.eacat.cat/)

PRO: [https://tramits.eacat.net](https://tramits.eacat.net/)

Anem a la pestanya Gestió → Serveis del Portal:

![](attachments/118555177/118555201.png)

  

Cerquem Via Oberta i fem clic a Modifica:

![](attachments/118555177/118555202.png)

  

Esborrem el Rol lligat al producte o la modalitat que estem desmantellant:

![](attachments/118555177/118555203.png)

  

Amb això haurem esborrat el rol.

Eliminar les pantalles a EACAT.
-------------------------------

Cal esborrar les pantalles de via oberta a nivell de EACAT. Aqui no tenim Flag _Actiu/Activa_ així que és recomanable fer un **backup** abans.

Si estem desmantellant un producte:

**Eliminar pantalles per un producte**

delete from lr6serveis.vo\_cfg cc
where cc.codi\_producte = ''; -- Codi producte que estem desmantellant, cercar-ho abans amb una select

  

  

Si estem desmantellant una modalitat:

**Eliminar pantalles per una modalitat**

delete from lr6serveis.vo\_cfg cc
where cc.codi\_modalitat= ''; -- Codi modalitatque estem desmantellant, cercar-ho abans amb una select

  

Eliminar documentació al GitHub.
--------------------------------

 Anem al repository GitHub → Settings

![](attachments/118555177/118555197.png)

  

![](attachments/118555177/118555198.png)

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

  

Attachments:
------------

![](images/icons/bullet_blue.gif) [image2025-1-30\_15-52-44.png](attachments/118555177/118555197.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-1-30\_15-53-3.png](attachments/118555177/118555198.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-1-30\_16-44-3.png](attachments/118555177/118555201.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-1-30\_16-44-30.png](attachments/118555177/118555202.png) (image/png)  
![](images/icons/bullet_blue.gif) [image2025-1-30\_16-45-12.png](attachments/118555177/118555203.png) (image/png)  

Document generated by Confluence on 02 June 2025 11:03

[Atlassian](http://www.atlassian.com/)