Manteniment Intern : Gestió de la base de dades  

1.  [Manteniment Intern](index.md)
2.  [Serveis de Manteniment Intern](Serveis-de-Manteniment-Intern_15368305.md)
3.  [Fitxa de servei de Intranet Confluence](Fitxa-de-servei-de-Intranet-Confluence_15368308.md)

Manteniment Intern : Gestió de la base de dades
===============================================

Created by Ivan Caballero, last modified on 19 mayo 2020

  

La base de dades de producció està a la màquina aoc-int-db01.

  

root@aoc-int-db01:~# su - postgres  
postgres@aoc-int-db01:~$

postgres@aoc-int-db01:~$ psql -U postgres  
psql (9.5.14)  
Type "help" for help.

  

  

Per llistar les bases de dades: \\l

postgres=# \\l  
List of databases  
Name | Owner | Encoding | Collate | Ctype | Access privileges  
\---------------+-------------------+----------+-------------+-------------+------------------------  
confluence | postgres | UTF8 | es\_ES.UTF-8 | es\_ES.UTF-8 |  
confluencepre | confluenceuserpre | UTF8 | C | C |  
crowddb | postgres | UTF8 | C | C | =Tc/postgres +  
| | | | | postgres=CTc/postgres +  
| | | | | crowduser=CTc/postgres  
jirapre | jirauserpre | UTF8 | C | C |  
jirapro | jirauserpro | UTF8 | C | C |  
postgres | postgres | UTF8 | es\_ES.UTF-8 | es\_ES.UTF-8 |  
template0 | postgres | UTF8 | es\_ES.UTF-8 | es\_ES.UTF-8 | =c/postgres +  
| | | | | postgres=CTc/postgres  
template1 | postgres | UTF8 | es\_ES.UTF-8 | es\_ES.UTF-8 | =c/postgres +  
| | | | | postgres=CTc/postgres  
(8 rows)

  

Fer backup
----------

    Per fer backup es fa servir la comanda: pg_dump.

postgres@aoc-int-db01:~$ pg\_dump confluence > /tmp/confluence.bak

Restore
-------

    Eliminar la base de dades i tornar a crear:

    dropdb dbname
    createdb dbname
    

    Restaurar

    psql test < dbname.bak

Document generated by Confluence on 06 junio 2025 23:57

[Atlassian](http://www.atlassian.com/)